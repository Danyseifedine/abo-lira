import{u as $,c as q,a as G,l as K,t as h,b as Q,j as X,d as Y,e as Z,C as ee,f as te,g as se,D as ae,_ as oe,h as le,p as T,i as U}from"./index-CeUds2Vm.js";import{_ as A}from"./DashboardButton.vue_vue_type_script_setup_true_lang--hzTQQj_.js";import{_ as z}from"./DashboardDatePicker.vue_vue_type_style_index_0_lang-X-wL1sRD.js";import{_ as S}from"./DashboardSelect.vue_vue_type_style_index_1_lang-CufL5Ot_.js";import{A as re,W as x,d as ie,I as ne,J as de,f as F,o as v,w as d,a as i,b as l,u as t,m as me,g,c as N,e as V,t as w,L as ue}from"./app-DO1XdPkr.js";import{_ as ce}from"./AdminLayout.vue_vue_type_script_setup_true_lang-CNaO4hZl.js";import{_ as P}from"./index-BzOC8Zr2.js";import{u as pe}from"./useGuard-DEtAhlps.js";import{c as fe}from"./converters-DLekJskJ.js";import{E as ve}from"./eye-DHrmtYDy.js";import{S as ge}from"./square-pen-BY2KqCnu.js";import{T as _e}from"./trash-2-9e9YTj_s.js";import{P as be}from"./plus-C2zj6vkY.js";import"./createLucideIcon-BHS8Z_ge.js";import"./index-BL2NAbWI.js";import"./translations-Ba_OUyzt.js";import"./Card.vue_vue_type_script_setup_true_lang-DI4qehXr.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-dguwFRfe.js";import"./check-Bel949Uf.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-DdgPMjvh.js";import"./Checkbox.vue_vue_type_script_setup_true_lang-CTB4vPwd.js";import"./Switch.vue_vue_type_script_setup_true_lang-Jv5foxfK.js";import"./index-B_iJvdeo.js";import"./index-B47NHgYJ.js";import"./index-CVigp1BT.js";import"./index-CUsY1N3O.js";import"./index-Cx41hsMo.js";import"./index-BgrCsZt-.js";import"./index-CmgHQSHW.js";import"./index-CxUt3wBp.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BoDe4Drx.js";function Ce(_){const{showCopyToClipboardToast:n}=$(),{userIsSuperAdmin:m}=pe(),o=re(!1);return q([G("#",{startFrom:1}),K("avatar_url","Avatar",{size:"sm",shape:"circle",alt:a=>a.name,fallback:"/assets/images/default.jpg"}),h("name","Name",{sortable:!0,searchable:!0,visible:!0,className:"font-medium font-bold"}),h("email","Email",{sortable:!0,searchable:!0,className:"lowercase"}),Q("roles","Roles"),X("is_active","Active",{onToggle:(a,c,u)=>{x.patch(route("super-admin.users.toggle-status",c.id),{is_active:a},{preserveScroll:!0,preserveState:!0,onStart:()=>{o.value=!0},onFinish:()=>{o.value=!1},onSuccess:b=>{var f;const p=(f=b.props.flash)==null?void 0:f.toast;(p==null?void 0:p.success)===!1&&u.revert()}})},disabled:a=>m(a)||o.value,toggledWhen:a=>fe(a),size:"sm",className:"flex justify-start"}),h("email_verified_at","Status",{format:a=>a?"verified":"unverified"}),Y("created_at","Joined",{relative:!0}),Z([{label:"Copy ID",icon:ee,onClick:a=>{navigator.clipboard.writeText(a.id.toString()),n("User ID")}},{separator:!0,label:"Separator"},{label:"View",icon:ve,href:a=>route("super-admin.users.show",a.id)},{label:"Edit",icon:ge,href:a=>route("super-admin.users.edit",a.id)},{separator:!0,label:"Separator",show:a=>!m(a)},{show:a=>!m(a),label:"Delete",icon:_e,destructive:!0,onClick:a=>{_(a)}}])])}const he={class:"p-4"},Se={class:"mb-6 flex items-center justify-between"},Ve={key:0,class:"flex items-center gap-2"},we={class:"space-y-4"},xe={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-5"},ye={class:"space-y-2"},De={class:"space-y-2"},ke={class:"space-y-2"},Te={class:"space-y-2"},Ue={class:"space-y-2"},Ae={class:"flex items-center justify-between border-t pt-4"},ze={class:"text-sm text-muted-foreground"},Fe={key:0},Ne={class:"flex gap-2"},ct=ie({__name:"Index",props:{users:{},filters:{},roles:{}},setup(_){const n=_,m=()=>{const s=n.filters;return{...s,role:(s==null?void 0:s.role)||"",status:(s==null?void 0:s.status)||"",email_verified:(s==null?void 0:s.email_verified)||"",created_from:T(s==null?void 0:s.created_from),created_to:T(s==null?void 0:s.created_to)}},{localFilters:o,isFilteringLoading:a,hasActiveFilters:c,activeFilterCount:u,applyFilters:b,clearFilters:p,updateFilters:f}=te(m(),{routeName:"super-admin.users.index",preserveState:!1,preserveScroll:!0}),R=n.roles.map(s=>({name:s.name,id:s.id}));ne(()=>n.filters,s=>{s&&f(m())},{deep:!0});const B=[{name:"Active",code:"active"},{name:"Inactive",code:"inactive"}],E=[{name:"All",code:""},{name:"Verified",code:"true"},{name:"Not Verified",code:"false"}],I=()=>{o.value.created_from&&(o.value.created_from=U(o.value.created_from)),o.value.created_to&&(o.value.created_to=U(o.value.created_to)),b()},L={searchable:!0,searchPlaceholder:"Search users by name or email...",selectable:!0,columnVisibility:!0,perPageSelector:!0,perPageOptions:[10,25,50,100],serverSide:!0,pagination:n.users,filterable:!0,filters:{...n.filters,direction:n.filters.direction},routeName:"super-admin.users.index"},j=()=>{},{initFlashToasts:O}=$();de(()=>{O()});const M=s=>{x.get(route("super-admin.users.show",s))},W=[{title:"Users",href:route("super-admin.users.index")}],{deleteDialogOpen:C,itemToDelete:y,openDeleteDialog:H}=se(),J=Ce(H);return(s,e)=>(v(),F(ce,{breadcrumbs:W},{default:d(()=>{var D,k;return[i(t(me),{title:"Users"}),l("div",he,[l("div",Se,[e[8]||(e[8]=l("div",null,[l("h1",{class:"text-3xl font-bold"},"Users"),l("p",{class:"mt-1 text-muted-foreground"},"Manage system users and their permissions")],-1)),i(A,{variant:"default",onClick:e[0]||(e[0]=()=>t(x).get(s.route("super-admin.users.create")))},{default:d(()=>[i(t(be),{class:"mr-2 h-4 w-4"}),e[7]||(e[7]=g(" Add User ",-1))]),_:1})]),i(ae,{columns:t(J),data:s.users.data,config:L,onSelectionChange:j,onRowClick:M},{toolbar:d(({table:r})=>[t(c)?(v(),N("div",Ve,[i(t(oe),{value:`${t(u)} ${t(u)===1?"filter":"filters"} active`,severity:"info"},null,8,["value"])])):V("",!0),r.getFilteredSelectedRowModel().rows.length>0?(v(),F(t(P),{key:1,variant:"destructive",size:"sm"},{default:d(()=>[g(" Delete ("+w(r.getFilteredSelectedRowModel().rows.length)+") ",1)]),_:2},1024)):V("",!0)]),filters:d(()=>[l("div",we,[l("div",xe,[l("div",ye,[e[9]||(e[9]=l("label",{class:"text-sm font-medium"},"Role",-1)),i(S,{modelValue:t(o).role,"onUpdate:modelValue":e[1]||(e[1]=r=>t(o).role=r),options:t(R),optionLabel:"name",optionValue:"id",placeholder:"All Roles",class:"w-full",size:"small",showClear:!0,filter:"",filterPlaceholder:"Search...",scrollHeight:"100px"},null,8,["modelValue","options"])]),l("div",De,[e[10]||(e[10]=l("label",{class:"text-sm font-medium"},"Status",-1)),i(S,{modelValue:t(o).status,"onUpdate:modelValue":e[2]||(e[2]=r=>t(o).status=r),options:B,optionLabel:"name",optionValue:"code",placeholder:"All Status",class:"w-full",size:"small",showClear:!0,filter:"",filterPlaceholder:"Search...",scrollHeight:"200px"},null,8,["modelValue"])]),l("div",ke,[e[11]||(e[11]=l("label",{class:"text-sm font-medium"},"Email Verification",-1)),i(S,{modelValue:t(o).email_verified,"onUpdate:modelValue":e[3]||(e[3]=r=>t(o).email_verified=r),options:E,optionLabel:"name",optionValue:"code",placeholder:"All",class:"w-full",size:"small",showClear:!0,filter:"",filterPlaceholder:"Search...",scrollHeight:"200px"},null,8,["modelValue"])]),l("div",Te,[e[12]||(e[12]=l("label",{class:"text-sm font-medium"},"Created From",-1)),i(z,{modelValue:t(o).created_from,"onUpdate:modelValue":e[4]||(e[4]=r=>t(o).created_from=r),placeholder:"Select Created From",size:"small","icon-display":"input"},null,8,["modelValue"])]),l("div",Ue,[e[13]||(e[13]=l("label",{class:"text-sm font-medium"},"Created To",-1)),i(z,{modelValue:t(o).created_to,"onUpdate:modelValue":e[5]||(e[5]=r=>t(o).created_to=r),placeholder:"Select Created To",size:"small","icon-display":"input"},null,8,["modelValue"])])]),l("div",Ae,[l("div",ze,[t(c)?(v(),N("span",Fe,w(t(u))+" "+w(t(u)===1?"filter":"filters")+" applied ",1)):V("",!0)]),l("div",Ne,[i(t(P),{onClick:t(p),variant:"ghost",size:"sm",disabled:!t(c)||t(a)},{default:d(()=>[...e[14]||(e[14]=[g(" Clear All ",-1)])]),_:1},8,["onClick","disabled"]),i(A,{onClick:I,size:"sm",variant:"default",loading:t(a)},{default:d(()=>[...e[15]||(e[15]=[g("Filter",-1)])]),_:1},8,["loading"])])])])]),_:1},8,["columns","data"]),i(le,{open:t(C),"onUpdate:open":e[6]||(e[6]=r=>ue(C)?C.value=r:null),"item-id":((D=t(y))==null?void 0:D.id)??null,"item-name":(k=t(y))==null?void 0:k.name,"route-name":"super-admin.users.destroy",title:"Delete User"},null,8,["open","item-id","item-name"])])]}),_:1}))}});export{ct as default};
