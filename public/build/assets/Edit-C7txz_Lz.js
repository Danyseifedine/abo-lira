import{d as C,C as $,j as f,i as D,f as F,o as y,w as u,a as t,b as r,u as e,m as L,h as P,c as B,e as T,t as n,g as p,F as S,W as j}from"./app-C_9PBI8O.js";import{_ as x}from"./DashboardButton.vue_vue_type_script_setup_true_lang-jdvaR_3Y.js";import{D as v}from"./DashboardFileUpload-MmgkSzFH.js";import{_ as V}from"./DashboardMultiSelect.vue_vue_type_style_index_1_lang-C5vmbjad.js";import{D as g}from"./DashboardTextInput-CA9DhSSj.js";import{D as w}from"./DashboardTextarea-DUG0yYqI.js";import{D as b}from"./DashboardToggle-Clt5NZ_j.js";import{_}from"./Hint.vue_vue_type_script_setup_true_lang-DaavxQid.js";import{_ as l}from"./index-D-urzs1U.js";import{_ as z}from"./ActionLayout.vue_vue_type_script_setup_true_lang-IocTTKs8.js";import{_ as m}from"./InputError.vue_vue_type_script_setup_true_lang-CGx01B8_.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-Dyeg1xfi.js";import"./index-DmYhWnlU.js";import"./createLucideIcon-C0ithsll.js";import"./refresh-cw-Dd2PsCct.js";import"./index-BMs6oOoE.js";import"./index-BxeelRGj.js";import"./index-DsHA7fuX.js";import"./index-wI7wi_Ra.js";import"./index-COJUaldu.js";import"./upload-PjWDz6uv.js";import"./image-BYv5PnKX.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-XY12mXXh.js";import"./index-Dz822CN2.js";import"./index-BGfNR6OY.js";import"./Switch.vue_vue_type_script_setup_true_lang-DlH5kZNA.js";import"./Heading.vue_vue_type_script_setup_true_lang-guUkRchk.js";import"./Card.vue_vue_type_script_setup_true_lang-CdHN0ZfT.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-esYFe75b.js";import"./CardDescription.vue_vue_type_script_setup_true_lang-DbYFRlMA.js";import"./Separator.vue_vue_type_script_setup_true_lang-B6Uod15-.js";import"./AdminLayout.vue_vue_type_script_setup_true_lang-zQel-0qJ.js";import"./useGuard-BknsbsIw.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DnC3vUMI.js";const N={class:"rounded-lg border border-dashed border-muted-foreground/30 bg-muted/10 p-4"},A={class:"flex items-center gap-3"},M={class:"flex-1"},E={class:"text-sm font-semibold"},W={class:"text-xs text-muted-foreground"},I={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},G={class:"space-y-2"},H={class:"space-y-2"},J={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},K={class:"space-y-2"},O={class:"space-y-2"},Q={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},R={class:"space-y-2"},X={class:"space-y-2"},Y={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},Z={class:"space-y-2"},ee={class:"space-y-2"},ae={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},te={class:"space-y-2"},le={class:"space-y-2"},se={class:"space-y-2"},re={class:"text-xs text-muted-foreground"},oe={class:"space-y-2"},de={class:"space-y-2"},ie={class:"flex justify-end gap-2"},Ge=C({__name:"Edit",props:{product:{},categories:{},qualities:{},existingFiles:{},existingPlacementFiles:{}},setup(q){const i=q,a=$({name_en:i.product.name_en,name_ar:i.product.name_ar,slug:i.product.slug,description_en:i.product.description_en||"",description_ar:i.product.description_ar||"",category_ids:i.product.category_id?[i.product.category_id]:[],quality_ids:i.product.quality_id?[i.product.quality_id]:[],sku:i.product.sku||"",price:i.product.price,has_variants:i.product.has_variants||!1,is_new:i.product.is_new||!1,status:!!i.product.status,temp_files:i.existingFiles||[],placement_image:i.existingPlacementFiles||[]});f(()=>a.category_ids,d=>{d&&d.length>1&&(a.category_ids=[d[d.length-1]])}),f(()=>a.quality_ids,d=>{d&&d.length>1&&(a.quality_ids=[d[d.length-1]])}),f(()=>a.name_en,d=>{d?a.slug=d.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):a.slug=""}),f(()=>a.has_variants,d=>{d&&(a.price=null)});const h=()=>{const d={...a.data(),category_id:a.category_ids.length>0?a.category_ids[0]:null,quality_id:a.quality_ids.length>0?a.quality_ids[0]:null};delete d.category_ids,delete d.quality_ids,a.transform(()=>d).put(route("super-admin.products.update",i.product.id))},k=[{title:l("sidebar.products"),href:route("super-admin.products.index")},{title:l("datatable.edit"),href:route("super-admin.products.edit",i.product.id)}],U=D(()=>!a.has_variants);return(d,s)=>(y(),F(z,{type:"edit",title:e(l)("datatable.products.title"),description:e(l)("datatable.products.edit_description"),breadcrumbs:k,"back-href":d.route("super-admin.products.index"),"show-card":!1,"max-width":"full"},{footer:u(()=>[r("div",ie,[t(x,{onClick:s[14]||(s[14]=o=>e(j).visit(d.route("super-admin.products.index"))),variant:"secondary",disabled:e(a).processing},{default:u(()=>[p(n(e(l)("datatable.cancel")),1)]),_:1},8,["disabled"]),t(x,{onClick:h,loading:e(a).processing,variant:"default"},{default:u(()=>[p(n(e(l)("datatable.save_changes")),1)]),_:1},8,["loading"])])]),default:u(()=>[t(e(L),{title:`${e(l)("datatable.edit")} ${e(l)("sidebar.products")}`},null,8,["title"]),r("form",{onSubmit:P(h,["prevent"]),class:"space-y-6"},[r("div",N,[r("div",A,[s[15]||(s[15]=r("div",{class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10"},[r("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[r("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})])],-1)),r("div",M,[r("h3",E,n(e(l)("datatable.simple_product")),1),r("p",W,n(e(l)("datatable.simple_product_description")),1)]),t(b,{id:"has_variants",modelValue:e(a).has_variants,"onUpdate:modelValue":s[0]||(s[0]=o=>e(a).has_variants=o),disabled:"",label:e(l)("datatable.variants_disabled"),size:"small"},null,8,["modelValue","label"])])]),r("div",I,[r("div",G,[t(e(c),{for:"name_en",required:""},{default:u(()=>[p(n(e(l)("datatable.name_en")),1)]),_:1}),t(g,{id:"name_en",modelValue:e(a).name_en,"onUpdate:modelValue":s[1]||(s[1]=o=>e(a).name_en=o),type:"text",placeholder:e(l)("datatable.name_en_placeholder"),error:e(a).errors.name_en,autofocus:"",required:""},null,8,["modelValue","placeholder","error"]),t(m,{message:e(a).errors.name_en},null,8,["message"]),t(_,{text:e(l)("datatable.name_en_hint")},null,8,["text"])]),r("div",H,[t(e(c),{for:"name_ar",required:""},{default:u(()=>[p(n(e(l)("datatable.name_ar")),1)]),_:1}),t(g,{id:"name_ar",modelValue:e(a).name_ar,"onUpdate:modelValue":s[2]||(s[2]=o=>e(a).name_ar=o),type:"text",placeholder:e(l)("datatable.name_ar_placeholder"),error:e(a).errors.name_ar,required:""},null,8,["modelValue","placeholder","error"]),t(m,{message:e(a).errors.name_ar},null,8,["message"]),t(_,{text:e(l)("datatable.name_ar_hint")},null,8,["text"])])]),r("div",J,[r("div",K,[t(e(c),{for:"slug",required:""},{default:u(()=>[p(n(e(l)("datatable.slug")),1)]),_:1}),t(g,{id:"slug",modelValue:e(a).slug,"onUpdate:modelValue":s[3]||(s[3]=o=>e(a).slug=o),type:"text",placeholder:e(l)("datatable.slug_placeholder"),error:e(a).errors.slug,disabled:""},null,8,["modelValue","placeholder","error"]),t(m,{message:e(a).errors.slug},null,8,["message"]),t(_,{text:e(l)("datatable.slug_auto_hint")},null,8,["text"])]),r("div",O,[t(e(c),{for:"sku",required:""},{default:u(()=>[p(n(e(l)("datatable.sku")),1)]),_:1}),t(g,{id:"sku",modelValue:e(a).sku,"onUpdate:modelValue":s[4]||(s[4]=o=>e(a).sku=o),type:"text",placeholder:e(l)("datatable.sku_placeholder"),error:e(a).errors.sku,disabled:""},null,8,["modelValue","placeholder","error"]),t(m,{message:e(a).errors.sku},null,8,["message"]),t(_,{text:e(l)("datatable.sku_hint_edit")},null,8,["text"])])]),r("div",Q,[r("div",R,[t(e(c),{required:""},{default:u(()=>[p(n(e(l)("datatable.category")),1)]),_:1}),t(V,{id:"category_ids",modelValue:e(a).category_ids,"onUpdate:modelValue":s[5]||(s[5]=o=>e(a).category_ids=o),options:d.categories,autoLocalizedLabel:"",optionValue:"id",placeholder:e(l)("datatable.select_category"),class:"w-full",showClear:!0,filter:"",filterPlaceholder:e(l)("datatable.search"),maxSelectedLabels:1,showToggleAll:!1,error:e(a).errors.category_id??null},null,8,["modelValue","options","placeholder","filterPlaceholder","error"]),t(m,{message:e(a).errors.category_id},null,8,["message"]),t(_,{text:e(l)("datatable.category_hint")},null,8,["text"])]),r("div",X,[t(e(c),{required:""},{default:u(()=>[p(n(e(l)("datatable.quality")),1)]),_:1}),t(V,{id:"quality_ids",modelValue:e(a).quality_ids,"onUpdate:modelValue":s[6]||(s[6]=o=>e(a).quality_ids=o),options:d.qualities,autoLocalizedLabel:"",optionValue:"id",placeholder:e(l)("datatable.select_quality"),class:"w-full",showClear:!0,filter:"",filterPlaceholder:e(l)("datatable.search"),maxSelectedLabels:1,showToggleAll:!1,error:e(a).errors.quality_id??null},null,8,["modelValue","options","placeholder","filterPlaceholder","error"]),t(m,{message:e(a).errors.quality_id},null,8,["message"]),t(_,{text:e(l)("datatable.quality_hint")},null,8,["text"])])]),r("div",Y,[r("div",Z,[t(e(c),{for:"description_en"},{default:u(()=>[p(n(e(l)("datatable.description_en")),1)]),_:1}),t(w,{id:"description_en",modelValue:e(a).description_en,"onUpdate:modelValue":s[7]||(s[7]=o=>e(a).description_en=o),placeholder:e(l)("datatable.description_en_placeholder"),error:e(a).errors.description_en,rows:4},null,8,["modelValue","placeholder","error"]),t(m,{message:e(a).errors.description_en},null,8,["message"])]),r("div",ee,[t(e(c),{for:"description_ar"},{default:u(()=>[p(n(e(l)("datatable.description_ar")),1)]),_:1}),t(w,{id:"description_ar",modelValue:e(a).description_ar,"onUpdate:modelValue":s[8]||(s[8]=o=>e(a).description_ar=o),placeholder:e(l)("datatable.description_ar_placeholder"),error:e(a).errors.description_ar,rows:4},null,8,["modelValue","placeholder","error"]),t(m,{message:e(a).errors.description_ar},null,8,["message"])])]),U.value?(y(),B(S,{key:0},[r("div",ae,[r("div",te,[t(e(c),{for:"price"},{default:u(()=>[p(n(e(l)("datatable.price")),1)]),_:1}),t(g,{id:"price",modelValue:e(a).price,"onUpdate:modelValue":s[9]||(s[9]=o=>e(a).price=o),type:"number",step:"0.01",min:"0",placeholder:e(l)("datatable.price_placeholder"),error:e(a).errors.price},null,8,["modelValue","placeholder","error"]),t(m,{message:e(a).errors.price},null,8,["message"]),t(_,{text:e(l)("datatable.price_hint")},null,8,["text"])])]),r("div",le,[t(e(c),{for:"featured_image"},{default:u(()=>[p(n(e(l)("datatable.featured_image")),1)]),_:1}),t(v,{id:"featured_image",modelValue:e(a).temp_files,"onUpdate:modelValue":s[10]||(s[10]=o=>e(a).temp_files=o),multiple:!1,accept:"image/*",context:"products"},null,8,["modelValue"]),t(m,{message:e(a).errors.temp_files},null,8,["message"]),t(_,{text:e(l)("datatable.featured_image_hint")},null,8,["text"])])],64)):T("",!0),r("div",se,[t(e(c),{for:"placement_image"},{default:u(()=>[p(n(e(l)("datatable.placement_image"))+" ",1),r("span",re,"("+n(e(l)("datatable.optional"))+")",1)]),_:1}),t(v,{id:"placement_image",modelValue:e(a).placement_image,"onUpdate:modelValue":s[11]||(s[11]=o=>e(a).placement_image=o),multiple:!1,accept:"image/*",context:"products-placement"},null,8,["modelValue"]),t(m,{message:e(a).errors.placement_image},null,8,["message"]),t(_,{text:e(l)("datatable.placement_image_hint")},null,8,["text"])]),r("div",oe,[t(e(c),{for:"is_new"},{default:u(()=>[p(n(e(l)("datatable.is_new")),1)]),_:1}),t(b,{id:"is_new",modelValue:e(a).is_new,"onUpdate:modelValue":s[12]||(s[12]=o=>e(a).is_new=o),error:e(a).errors.is_new,label:e(a).is_new?e(l)("datatable.active"):e(l)("datatable.inactive"),hint:e(l)("datatable.is_new_hint")},null,8,["modelValue","error","label","hint"]),t(m,{message:e(a).errors.is_new},null,8,["message"])]),r("div",de,[t(e(c),{for:"status"},{default:u(()=>[p(n(e(l)("datatable.status")),1)]),_:1}),t(b,{id:"status",modelValue:e(a).status,"onUpdate:modelValue":s[13]||(s[13]=o=>e(a).status=o),error:e(a).errors.status,label:e(a).status?e(l)("datatable.active"):e(l)("datatable.inactive"),hint:e(l)("datatable.status_hint")},null,8,["modelValue","error","label","hint"]),t(m,{message:e(a).errors.status},null,8,["message"])])],32)]),_:1},8,["title","description","back-href"]))}});export{Ge as default};
