import{d as H,n as I,A as F,C as W,E as U,f as A,o as h,w as n,a,b as s,u as e,m as O,h as R,c as y,e as x,t as i,g as u,l as $,O as C,F as G,D as J,W as K}from"./app-D8Tikvxa.js";import{_ as w}from"./DashboardButton.vue_vue_type_script_setup_true_lang-Dqt0LwJF.js";import{D as P}from"./DashboardFileUpload-BZTj1Svh.js";import{_ as q}from"./DashboardSelect.vue_vue_type_style_index_1_lang-Bqa9gpk6.js";import{D as v}from"./DashboardTextInput-BPSMqUoA.js";import{D as L}from"./DashboardTextarea-DXRersHM.js";import{D as z}from"./DashboardToggle-D2mjG9_z.js";import{_ as b}from"./Hint.vue_vue_type_script_setup_true_lang-CZjMi60N.js";import{_ as t}from"./translations-DaTYYhMk.js";import{_ as Q}from"./ActionLayout.vue_vue_type_script_setup_true_lang-C4igWTHG.js";import{_ as g}from"./InputError.vue_vue_type_script_setup_true_lang-Ba1b74ay.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-7YG-aYJT.js";import{P as X}from"./plus-CgqRtLFq.js";import{T as Y}from"./trash-2-BZ3sr58P.js";import"./index-BZykzkAf.js";import"./createLucideIcon-gZqVR3e7.js";import"./index-CUgbvSIC.js";import"./index-DkJBhLkp.js";import"./index-D8waTapa.js";import"./index-UKDYuvGA.js";import"./index-BHPODb7j.js";import"./upload-3D0mXHTK.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-DsItl2A7.js";import"./index-CRq9YM9R.js";import"./index-BSJJGoLm.js";import"./Switch.vue_vue_type_script_setup_true_lang-C_Tvum0R.js";import"./Heading.vue_vue_type_script_setup_true_lang-BO4FdIML.js";import"./Card.vue_vue_type_script_setup_true_lang-DQ_cJ84B.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-BD69KO1d.js";import"./AdminLayout.vue_vue_type_script_setup_true_lang-Dwk4kiaH.js";import"./useGuard-CJYkl7ZT.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-Bjn7djkJ.js";import"./check-DLxhiGYE.js";const Z={class:"rounded-lg border border-dashed border-muted-foreground/30 bg-muted/10 p-4"},ee={class:"flex items-center gap-3"},te={class:"flex-1"},ae={class:"text-sm font-semibold"},le={class:"text-xs text-muted-foreground"},oe={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},se={class:"space-y-2"},re={class:"space-y-2"},de={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},ie={class:"space-y-2"},ne={class:"space-y-2"},ue={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},ce={class:"space-y-2"},pe={class:"space-y-2"},_e={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},me={class:"space-y-2"},fe={class:"space-y-2"},ge={class:"space-y-2"},be={class:"space-y-2"},he={class:"space-y-4 rounded-lg border border-dashed border-primary/30 bg-primary/5 p-4"},ye={class:"text-sm font-semibold"},ve={class:"text-xs text-muted-foreground"},Ve={class:"flex gap-4"},xe={class:"flex items-center gap-2"},ke={class:"flex items-center gap-2"},we={class:"flex items-center gap-2"},qe={key:0,class:"space-y-2"},ze={class:"space-y-4"},Ue={class:"flex items-center justify-between"},$e={class:"text-lg font-semibold"},Ce={class:"text-sm text-muted-foreground"},Pe={key:0,class:"rounded-lg border border-dashed border-muted-foreground/30 bg-muted/10 p-8 text-center"},De={class:"text-sm text-muted-foreground"},Fe={class:"flex items-center justify-between"},Le={class:"font-semibold"},Te={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},Me={key:0,class:"space-y-2"},je={key:1,class:"space-y-2"},Be={class:"space-y-2"},Se={class:"space-y-2"},Ee={key:0,class:"space-y-2"},Ne={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},He={class:"space-y-2"},Ie={class:"space-y-2"},We={class:"flex justify-end gap-2"},qt=H({__name:"EditComplex",props:{product:{},categories:{},qualities:{},colors:{},sizes:{},existingVariants:{},existingPlacementFiles:{},existingFiles:{}},setup(T){const k=I(),p=T,f=F((()=>{const d=p.existingVariants.some(l=>l.color_id),r=p.existingVariants.some(l=>l.size_id);return d&&r?"both":r?"size":"color"})()),V=F(p.existingVariants.map(d=>({id:d.id,color_id:d.color_id,size_id:d.size_id,price:d.price,stock_quantity:d.stock_quantity,out_of_stock:d.out_of_stock,status:d.status,temp_files:d.existing_media||[],existing_media:d.existing_media||[]}))),o=W({name_en:p.product.name_en,name_ar:p.product.name_ar,slug:p.product.slug,description_en:p.product.description_en||"",description_ar:p.product.description_ar||"",category_id:p.product.category_id,quality_id:p.product.quality_id,sku:p.product.sku,has_variants:!0,status:p.product.status,temp_files:p.existingFiles||[],placement_image:p.existingPlacementFiles||[],variants:[]}),M=()=>{V.value.push({id:`variant-${Date.now()}`,color_id:null,size_id:null,price:null,stock_quantity:null,out_of_stock:!1,status:!0,temp_files:[]})},j=d=>{V.value.splice(d,1)},B=U(()=>f.value==="color"||f.value==="both"),S=U(()=>f.value==="size"||f.value==="both"),E=U(()=>f.value==="color"||f.value==="both"),D=()=>{o.variants=V.value.map(d=>({id:typeof d.id=="number"?d.id:null,color_id:d.color_id,size_id:d.size_id,price:d.price,stock_quantity:d.stock_quantity,out_of_stock:d.out_of_stock,status:d.status,temp_files:d.temp_files.filter(r=>r.temp_path),existing_media:d.existing_media||[]})),o.put(route("super-admin.products.update-complex",p.product.id),{onError:d=>{console.error("Validation errors:",d)},onSuccess:()=>{console.log("Product updated successfully")}})},N=[{title:t("sidebar.products"),href:route("super-admin.products.index")},{title:p.product.name_en,href:"#"}];return(d,r)=>(h(),A(Q,{type:"edit",title:e(t)("datatable.products.title"),description:e(t)("datatable.products.edit_description"),breadcrumbs:N,"back-href":d.route("super-admin.products.index"),"show-card":!1,"max-width":"full"},{footer:n(()=>[s("div",We,[a(w,{onClick:r[15]||(r[15]=l=>e(K).visit(d.route("super-admin.products.index"))),variant:"secondary",disabled:e(o).processing},{default:n(()=>[u(i(e(t)("datatable.cancel")),1)]),_:1},8,["disabled"]),a(w,{onClick:D,loading:e(o).processing,variant:"default"},{default:n(()=>[u(i(e(t)("datatable.update")),1)]),_:1},8,["loading"])])]),default:n(()=>[a(e(O),{title:`${e(t)("datatable.edit")} ${p.product.name_en}`},null,8,["title"]),s("form",{onSubmit:R(D,["prevent"]),class:"space-y-6"},[s("div",Z,[s("div",ee,[r[16]||(r[16]=s("div",{class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10"},[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z"})])],-1)),s("div",te,[s("h3",ae,i(e(t)("datatable.complex_product")),1),s("p",le,i(e(t)("datatable.complex_product_description")),1)]),a(z,{id:"has_variants",modelValue:e(o).has_variants,"onUpdate:modelValue":r[0]||(r[0]=l=>e(o).has_variants=l),disabled:"",label:e(t)("datatable.variants_enabled"),size:"small"},null,8,["modelValue","label"])])]),s("div",oe,[s("div",se,[a(e(c),{for:"name_en",required:""},{default:n(()=>[u(i(e(t)("datatable.name_en")),1)]),_:1}),a(v,{id:"name_en",modelValue:e(o).name_en,"onUpdate:modelValue":r[1]||(r[1]=l=>e(o).name_en=l),type:"text",placeholder:e(t)("datatable.name_en_placeholder"),error:e(o).errors.name_en,autofocus:"",required:""},null,8,["modelValue","placeholder","error"]),a(g,{message:e(o).errors.name_en},null,8,["message"]),a(b,{text:e(t)("datatable.name_en_hint")},null,8,["text"])]),s("div",re,[a(e(c),{for:"name_ar",required:""},{default:n(()=>[u(i(e(t)("datatable.name_ar")),1)]),_:1}),a(v,{id:"name_ar",modelValue:e(o).name_ar,"onUpdate:modelValue":r[2]||(r[2]=l=>e(o).name_ar=l),type:"text",placeholder:e(t)("datatable.name_ar_placeholder"),error:e(o).errors.name_ar,required:""},null,8,["modelValue","placeholder","error"]),a(g,{message:e(o).errors.name_ar},null,8,["message"]),a(b,{text:e(t)("datatable.name_ar_hint")},null,8,["text"])])]),s("div",de,[s("div",ie,[a(e(c),{for:"slug",required:""},{default:n(()=>[u(i(e(t)("datatable.slug")),1)]),_:1}),a(v,{id:"slug",modelValue:e(o).slug,"onUpdate:modelValue":r[3]||(r[3]=l=>e(o).slug=l),type:"text",placeholder:e(t)("datatable.slug_placeholder"),error:e(o).errors.slug,disabled:""},null,8,["modelValue","placeholder","error"]),a(g,{message:e(o).errors.slug},null,8,["message"]),a(b,{text:e(t)("datatable.slug_auto_hint")},null,8,["text"])]),s("div",ne,[a(e(c),{for:"sku",required:""},{default:n(()=>[u(i(e(t)("datatable.sku")),1)]),_:1}),a(v,{id:"sku",modelValue:e(o).sku,"onUpdate:modelValue":r[4]||(r[4]=l=>e(o).sku=l),type:"text",placeholder:e(t)("datatable.sku_placeholder"),error:e(o).errors.sku,disabled:""},null,8,["modelValue","placeholder","error"]),a(g,{message:e(o).errors.sku},null,8,["message"]),a(b,{text:e(t)("datatable.sku_auto_hint")},null,8,["text"])])]),s("div",ue,[s("div",ce,[a(e(c),{for:"category_id",required:""},{default:n(()=>[u(i(e(t)("datatable.category")),1)]),_:1}),a(q,{id:"category_id",modelValue:e(o).category_id,"onUpdate:modelValue":r[5]||(r[5]=l=>e(o).category_id=l),options:d.categories,optionLabel:e(k).props.locale==="ar"?"name_ar":"name_en",optionValue:"id",placeholder:e(t)("datatable.select_category"),class:"w-full",showClear:!0,filter:"",error:e(o).errors.category_id??null,filterPlaceholder:e(t)("datatable.search")},null,8,["modelValue","options","optionLabel","placeholder","error","filterPlaceholder"]),a(g,{message:e(o).errors.category_id},null,8,["message"]),a(b,{text:e(t)("datatable.category_hint")},null,8,["text"])]),s("div",pe,[a(e(c),{for:"quality_id",required:""},{default:n(()=>[u(i(e(t)("datatable.quality")),1)]),_:1}),a(q,{id:"quality_id",modelValue:e(o).quality_id,"onUpdate:modelValue":r[6]||(r[6]=l=>e(o).quality_id=l),options:d.qualities,optionLabel:e(k).props.locale==="ar"?"name_ar":"name_en",optionValue:"id",placeholder:e(t)("datatable.select_quality"),class:"w-full",showClear:!0,filter:"",error:e(o).errors.quality_id??null,filterPlaceholder:e(t)("datatable.search")},null,8,["modelValue","options","optionLabel","placeholder","error","filterPlaceholder"]),a(g,{message:e(o).errors.quality_id},null,8,["message"]),a(b,{text:e(t)("datatable.quality_hint")},null,8,["text"])])]),s("div",_e,[s("div",me,[a(e(c),{for:"description_en"},{default:n(()=>[u(i(e(t)("datatable.description_en")),1)]),_:1}),a(L,{id:"description_en",modelValue:e(o).description_en,"onUpdate:modelValue":r[7]||(r[7]=l=>e(o).description_en=l),placeholder:e(t)("datatable.description_en_placeholder"),error:e(o).errors.description_en,rows:4},null,8,["modelValue","placeholder","error"]),a(g,{message:e(o).errors.description_en},null,8,["message"])]),s("div",fe,[a(e(c),{for:"description_ar"},{default:n(()=>[u(i(e(t)("datatable.description_ar")),1)]),_:1}),a(L,{id:"description_ar",modelValue:e(o).description_ar,"onUpdate:modelValue":r[8]||(r[8]=l=>e(o).description_ar=l),placeholder:e(t)("datatable.description_ar_placeholder"),error:e(o).errors.description_ar,rows:4},null,8,["modelValue","placeholder","error"]),a(g,{message:e(o).errors.description_ar},null,8,["message"])])]),s("div",ge,[a(e(c),{for:"status"},{default:n(()=>[u(i(e(t)("datatable.status")),1)]),_:1}),a(z,{id:"status",modelValue:e(o).status,"onUpdate:modelValue":r[9]||(r[9]=l=>e(o).status=l),error:e(o).errors.status,label:e(o).status?e(t)("datatable.active"):e(t)("datatable.inactive"),hint:e(t)("datatable.status_hint")},null,8,["modelValue","error","label","hint"]),a(g,{message:e(o).errors.status},null,8,["message"])]),s("div",be,[a(e(c),{for:"placement_image"},{default:n(()=>[u(i(e(t)("datatable.placement_image")),1)]),_:1}),a(P,{id:"placement_image",modelValue:e(o).placement_image,"onUpdate:modelValue":r[10]||(r[10]=l=>e(o).placement_image=l),multiple:!1,accept:"image/*","file-limit":1,context:"product-placement"},null,8,["modelValue"]),a(b,{text:e(t)("datatable.placement_image_hint")},null,8,["text"]),a(g,{message:e(o).errors.placement_image},null,8,["message"])]),s("div",he,[s("div",null,[s("h3",ye,i(e(t)("datatable.variant_type")),1),s("p",ve,i(e(t)("datatable.variant_type_hint")),1)]),s("div",Ve,[s("div",xe,[$(s("input",{type:"radio",id:"variant_color",value:"color","onUpdate:modelValue":r[11]||(r[11]=l=>f.value=l),class:"h-4 w-4"},null,512),[[C,f.value]]),a(e(c),{for:"variant_color",class:"cursor-pointer font-normal"},{default:n(()=>[u(i(e(t)("datatable.color_only")),1)]),_:1})]),s("div",ke,[$(s("input",{type:"radio",id:"variant_size",value:"size","onUpdate:modelValue":r[12]||(r[12]=l=>f.value=l),class:"h-4 w-4"},null,512),[[C,f.value]]),a(e(c),{for:"variant_size",class:"cursor-pointer font-normal"},{default:n(()=>[u(i(e(t)("datatable.size_only")),1)]),_:1})]),s("div",we,[$(s("input",{type:"radio",id:"variant_both",value:"both","onUpdate:modelValue":r[13]||(r[13]=l=>f.value=l),class:"h-4 w-4"},null,512),[[C,f.value]]),a(e(c),{for:"variant_both",class:"cursor-pointer font-normal"},{default:n(()=>[u(i(e(t)("datatable.color_and_size")),1)]),_:1})])])]),f.value==="size"?(h(),y("div",qe,[a(e(c),{for:"temp_files"},{default:n(()=>[u(i(e(t)("datatable.featured_image")),1)]),_:1}),a(P,{id:"temp_files",modelValue:e(o).temp_files,"onUpdate:modelValue":r[14]||(r[14]=l=>e(o).temp_files=l),multiple:!1,accept:"image/*","file-limit":1,context:"products"},null,8,["modelValue"]),a(b,{text:e(t)("datatable.featured_image_hint")},null,8,["text"]),a(g,{message:e(o).errors.temp_files},null,8,["message"])])):x("",!0),s("div",ze,[s("div",Ue,[s("div",null,[s("h3",$e,i(e(t)("datatable.product_variants")),1),s("p",Ce,i(e(t)("datatable.product_variants_hint")),1)]),a(w,{type:"button",onClick:M,variant:"outline",size:"sm"},{default:n(()=>[a(e(X),{class:"mr-2 h-4 w-4"}),u(" "+i(e(t)("datatable.add_variant")),1)]),_:1})]),a(g,{message:e(o).errors.variants},null,8,["message"]),V.value.length===0?(h(),y("div",Pe,[s("p",De,i(e(t)("datatable.no_variants_added")),1)])):x("",!0),(h(!0),y(G,null,J(V.value,(l,_)=>(h(),y("div",{key:l.id,class:"space-y-4 rounded-lg border p-4"},[s("div",Fe,[s("h4",Le,i(e(t)("datatable.variant"))+" #"+i(_+1),1),a(w,{type:"button",onClick:m=>j(_),variant:"ghost",size:"sm"},{default:n(()=>[a(e(Y),{class:"h-4 w-4 text-destructive"})]),_:2},1032,["onClick"])]),s("div",Te,[B.value?(h(),y("div",Me,[a(e(c),{for:`color_${_}`,required:""},{default:n(()=>[u(i(e(t)("datatable.color")),1)]),_:2},1032,["for"]),a(q,{id:`color_${_}`,modelValue:l.color_id,"onUpdate:modelValue":m=>l.color_id=m,options:d.colors,optionLabel:e(k).props.locale==="ar"?"name_ar":"name_en",optionValue:"id",placeholder:e(t)("datatable.select_color"),class:"w-full",showClear:!0,filter:"",filterPlaceholder:e(t)("datatable.search")},null,8,["id","modelValue","onUpdate:modelValue","options","optionLabel","placeholder","filterPlaceholder"])])):x("",!0),S.value?(h(),y("div",je,[a(e(c),{for:`size_${_}`,required:""},{default:n(()=>[u(i(e(t)("datatable.size")),1)]),_:2},1032,["for"]),a(q,{id:`size_${_}`,modelValue:l.size_id,"onUpdate:modelValue":m=>l.size_id=m,options:d.sizes,optionLabel:e(k).props.locale==="ar"?"name_ar":"name_en",optionValue:"id",placeholder:e(t)("datatable.select_size"),class:"w-full",showClear:!0,filter:"",filterPlaceholder:e(t)("datatable.search")},null,8,["id","modelValue","onUpdate:modelValue","options","optionLabel","placeholder","filterPlaceholder"])])):x("",!0),s("div",Be,[a(e(c),{for:`price_${_}`,required:""},{default:n(()=>[u(i(e(t)("datatable.price")),1)]),_:2},1032,["for"]),a(v,{id:`price_${_}`,modelValue:l.price,"onUpdate:modelValue":m=>l.price=m,type:"number",step:"0.01",placeholder:e(t)("datatable.price_placeholder")},null,8,["id","modelValue","onUpdate:modelValue","placeholder"])]),s("div",Se,[a(e(c),{for:`stock_${_}`,required:""},{default:n(()=>[u(i(e(t)("datatable.stock_quantity")),1)]),_:2},1032,["for"]),a(v,{id:`stock_${_}`,modelValue:l.stock_quantity,"onUpdate:modelValue":m=>l.stock_quantity=m,type:"number",placeholder:e(t)("datatable.stock_quantity_placeholder")},null,8,["id","modelValue","onUpdate:modelValue","placeholder"])])]),E.value?(h(),y("div",Ee,[a(e(c),{for:`image_${_}`},{default:n(()=>[u(i(e(t)("datatable.variant_image")),1)]),_:2},1032,["for"]),a(P,{id:`image_${_}`,modelValue:l.temp_files,"onUpdate:modelValue":m=>l.temp_files=m,multiple:!1,accept:"image/*","file-limit":1,context:"product-variants"},null,8,["id","modelValue","onUpdate:modelValue"]),a(b,{text:e(t)("datatable.variant_image_hint")},null,8,["text"])])):x("",!0),s("div",Ne,[s("div",He,[a(e(c),{for:`out_of_stock_${_}`},{default:n(()=>[u(i(e(t)("datatable.out_of_stock")),1)]),_:2},1032,["for"]),a(z,{id:`out_of_stock_${_}`,modelValue:l.out_of_stock,"onUpdate:modelValue":m=>l.out_of_stock=m,label:l.out_of_stock?e(t)("datatable.yes"):e(t)("datatable.no"),size:"small"},null,8,["id","modelValue","onUpdate:modelValue","label"])]),s("div",Ie,[a(e(c),{for:`variant_status_${_}`},{default:n(()=>[u(i(e(t)("datatable.status")),1)]),_:2},1032,["for"]),a(z,{id:`variant_status_${_}`,modelValue:l.status,"onUpdate:modelValue":m=>l.status=m,label:l.status?e(t)("datatable.active"):e(t)("datatable.inactive"),size:"small"},null,8,["id","modelValue","onUpdate:modelValue","label"])])])]))),128))])],32)]),_:1},8,["title","description","back-href"]))}});export{qt as default};
