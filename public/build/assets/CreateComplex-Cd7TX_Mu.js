import{d as O,A as S,C as R,I as q,E as z,O as G,f as J,o as h,w as n,a as l,b as o,u as e,m as K,h as Q,c as b,e as x,t as d,g as u,l as U,S as $,F as X,D as Y,W as Z}from"./app-BLvqcGW3.js";import{_ as k}from"./DashboardButton.vue_vue_type_script_setup_true_lang-CkgpKmAW.js";import{D as C}from"./DashboardFileUpload-Dt7jMCrv.js";import{_ as T}from"./DashboardMultiSelect.vue_vue_type_style_index_1_lang-BYVupNOr.js";import{D as w}from"./DashboardTextInput-CWKYOY4v.js";import{D as F}from"./DashboardTextarea-D08P23UF.js";import{D}from"./DashboardToggle-BgN_Zj7e.js";import{_ as g}from"./Hint.vue_vue_type_script_setup_true_lang-BpbTqRav.js";import{_ as a}from"./translations-CHj0IjNl.js";import{_ as ee}from"./ActionLayout.vue_vue_type_script_setup_true_lang-Fmuhp8v9.js";import{_ as f}from"./InputError.vue_vue_type_script_setup_true_lang-DaSrKUd3.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-B0r9Bzz-.js";import{P as ae}from"./plus-BKGSru3F.js";import{T as te}from"./trash-2-BkExQwR3.js";import"./index-D5Kq-RR9.js";import"./createLucideIcon-DaWsEudp.js";import"./index-CSYhC9wE.js";import"./index-CW2OTQQQ.js";import"./index-CN3Bt6Ta.js";import"./index-CoHzRWMm.js";import"./index-D_fOJs2O.js";import"./upload-CSBvCLkC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Bw54K75D.js";import"./index-DLkRj0Y6.js";import"./index-oY5pzE6t.js";import"./Switch.vue_vue_type_script_setup_true_lang-Bl-mZlJ5.js";import"./Heading.vue_vue_type_script_setup_true_lang-YTj8ID6E.js";import"./Card.vue_vue_type_script_setup_true_lang-D5CuwiOU.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-fRk2Fftf.js";import"./AdminLayout.vue_vue_type_script_setup_true_lang-DKoU4_Ix.js";import"./useGuard-Bs-GSLa9.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B4LOU7g8.js";import"./check-DBjaRxV-.js";const le={class:"rounded-lg border border-dashed border-muted-foreground/30 bg-muted/10 p-4"},se={class:"flex items-center gap-3"},oe={class:"flex-1"},re={class:"text-sm font-semibold"},de={class:"text-xs text-muted-foreground"},ie={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},ne={class:"space-y-2"},ue={class:"space-y-2"},ce={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},pe={class:"space-y-2"},me={class:"space-y-2"},_e={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},fe={class:"space-y-2"},ge={class:"space-y-2"},he={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},be={class:"space-y-2"},ve={class:"space-y-2"},ye={class:"space-y-2"},Ve={class:"space-y-2"},xe={class:"space-y-4 rounded-lg border border-dashed border-primary/30 bg-primary/5 p-4"},we={class:"text-sm font-semibold"},qe={class:"text-xs text-muted-foreground"},ke={class:"flex gap-4"},ze={class:"flex items-center gap-2"},Ue={class:"flex items-center gap-2"},$e={class:"flex items-center gap-2"},Ce={key:0,class:"space-y-2"},De={class:"space-y-4"},Pe={class:"flex items-center justify-between"},Le={class:"text-lg font-semibold"},Se={class:"text-sm text-muted-foreground"},Te={key:0,class:"rounded-lg border border-dashed border-muted-foreground/30 bg-muted/10 p-8 text-center"},Fe={class:"text-sm text-muted-foreground"},Me={class:"flex items-center justify-between"},je={class:"font-semibold"},Be={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},Ne={key:0,class:"space-y-2"},Ae={key:1,class:"space-y-2"},Ee={class:"space-y-2"},Ie={key:0,class:"space-y-2"},He={class:"space-y-2"},We={class:"flex justify-end gap-2"},ka=O({__name:"CreateComplex",props:{categories:{},qualities:{},colors:{},sizes:{}},setup(M){const P=M,p=S("color"),v=S([]),t=R({name_en:"",name_ar:"",slug:"",description_en:"",description_ar:"",category_ids:[],quality_ids:[],sku:"",has_variants:!0,status:!0,temp_files:[],placement_image:[],variants:[]});q(()=>t.category_ids,i=>{i&&i.length>1&&(t.category_ids=[i[i.length-1]])}),q(()=>t.quality_ids,i=>{i&&i.length>1&&(t.quality_ids=[i[i.length-1]])}),q(()=>t.name_en,i=>{i?t.slug=i.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-+|-+$/g,""):t.slug=""}),q([()=>t.category_ids,()=>t.quality_ids],([i,r])=>{const y=i.length>0?i[0]:null,s=r.length>0?r[0]:null;if(y&&s){const m=P.categories.find(V=>V.id===y),_=P.qualities.find(V=>V.id===s);if(m&&_){const V=m.name_en.substring(0,3).toUpperCase(),H=_.name_en.substring(0,3).toUpperCase(),W=Date.now().toString().slice(-6);t.sku=`${V}-${H}-${W}`}}});const j=()=>{v.value.push({id:`variant-${Date.now()}`,color_id:null,size_id:null,price:null,status:!0,temp_files:[]})},B=i=>{v.value.splice(i,1)},N=z(()=>p.value==="color"||p.value==="both"),A=z(()=>p.value==="size"||p.value==="both"),E=z(()=>p.value==="color"||p.value==="both"),L=()=>{t.variants=v.value.map(r=>({color_id:r.color_id,size_id:r.size_id,price:r.price,status:r.status,temp_files:r.temp_files}));const i={...t.data(),category_id:t.category_ids.length>0?t.category_ids[0]:null,quality_id:t.quality_ids.length>0?t.quality_ids[0]:null};delete i.category_ids,delete i.quality_ids,t.transform(()=>i).post(route("super-admin.products.store-complex"),{onError:r=>{console.error("Validation errors:",r)},onSuccess:()=>{console.log("Product created successfully")}})},I=[{title:a("sidebar.products"),href:route("super-admin.products.index")},{title:a("datatable.add_complex_product"),href:route("super-admin.products.create-complex")}];return(i,r)=>{const y=G("DashboardSelect");return h(),J(ee,{type:"create",title:e(a)("datatable.products.title"),description:e(a)("datatable.products.create_complex_description"),breadcrumbs:I,"back-href":i.route("super-admin.products.index"),"show-card":!1,"max-width":"full"},{footer:n(()=>[o("div",We,[l(k,{onClick:r[15]||(r[15]=s=>e(Z).visit(i.route("super-admin.products.index"))),variant:"secondary",disabled:e(t).processing},{default:n(()=>[u(d(e(a)("datatable.cancel")),1)]),_:1},8,["disabled"]),l(k,{onClick:L,loading:e(t).processing,variant:"default"},{default:n(()=>[u(d(e(a)("datatable.create")),1)]),_:1},8,["loading"])])]),default:n(()=>[l(e(K),{title:`${e(a)("datatable.add")} ${e(a)("sidebar.products")}`},null,8,["title"]),o("form",{onSubmit:Q(L,["prevent"]),class:"space-y-6"},[o("div",le,[o("div",se,[r[16]||(r[16]=o("div",{class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z"})])],-1)),o("div",oe,[o("h3",re,d(e(a)("datatable.complex_product")),1),o("p",de,d(e(a)("datatable.complex_product_description")),1)]),l(D,{id:"has_variants",modelValue:e(t).has_variants,"onUpdate:modelValue":r[0]||(r[0]=s=>e(t).has_variants=s),disabled:"",label:e(a)("datatable.variants_enabled"),size:"small"},null,8,["modelValue","label"])])]),o("div",ie,[o("div",ne,[l(e(c),{for:"name_en",required:""},{default:n(()=>[u(d(e(a)("datatable.name_en")),1)]),_:1}),l(w,{id:"name_en",modelValue:e(t).name_en,"onUpdate:modelValue":r[1]||(r[1]=s=>e(t).name_en=s),type:"text",placeholder:e(a)("datatable.name_en_placeholder"),error:e(t).errors.name_en,autofocus:"",required:""},null,8,["modelValue","placeholder","error"]),l(f,{message:e(t).errors.name_en},null,8,["message"]),l(g,{text:e(a)("datatable.name_en_hint")},null,8,["text"])]),o("div",ue,[l(e(c),{for:"name_ar",required:""},{default:n(()=>[u(d(e(a)("datatable.name_ar")),1)]),_:1}),l(w,{id:"name_ar",modelValue:e(t).name_ar,"onUpdate:modelValue":r[2]||(r[2]=s=>e(t).name_ar=s),type:"text",placeholder:e(a)("datatable.name_ar_placeholder"),error:e(t).errors.name_ar,required:""},null,8,["modelValue","placeholder","error"]),l(f,{message:e(t).errors.name_ar},null,8,["message"]),l(g,{text:e(a)("datatable.name_ar_hint")},null,8,["text"])])]),o("div",ce,[o("div",pe,[l(e(c),{for:"slug",required:""},{default:n(()=>[u(d(e(a)("datatable.slug")),1)]),_:1}),l(w,{id:"slug",modelValue:e(t).slug,"onUpdate:modelValue":r[3]||(r[3]=s=>e(t).slug=s),type:"text",placeholder:e(a)("datatable.slug_placeholder"),error:e(t).errors.slug,disabled:""},null,8,["modelValue","placeholder","error"]),l(f,{message:e(t).errors.slug},null,8,["message"]),l(g,{text:e(a)("datatable.slug_auto_hint")},null,8,["text"])]),o("div",me,[l(e(c),{for:"sku",required:""},{default:n(()=>[u(d(e(a)("datatable.sku")),1)]),_:1}),l(w,{id:"sku",modelValue:e(t).sku,"onUpdate:modelValue":r[4]||(r[4]=s=>e(t).sku=s),type:"text",placeholder:e(a)("datatable.sku_placeholder"),error:e(t).errors.sku,disabled:""},null,8,["modelValue","placeholder","error"]),l(f,{message:e(t).errors.sku},null,8,["message"]),l(g,{text:e(a)("datatable.sku_auto_hint")},null,8,["text"])])]),o("div",_e,[o("div",fe,[l(e(c),{required:""},{default:n(()=>[u(d(e(a)("datatable.category")),1)]),_:1}),l(T,{id:"category_ids",modelValue:e(t).category_ids,"onUpdate:modelValue":r[5]||(r[5]=s=>e(t).category_ids=s),options:i.categories,autoLocalizedLabel:"",optionValue:"id",placeholder:e(a)("datatable.select_category"),class:"w-full",showClear:!0,filter:"",error:e(t).errors.category_id??null,filterPlaceholder:e(a)("datatable.search"),maxSelectedLabels:1,showToggleAll:!1},null,8,["modelValue","options","placeholder","error","filterPlaceholder"]),l(f,{message:e(t).errors.category_id},null,8,["message"]),l(g,{text:e(a)("datatable.category_hint")},null,8,["text"])]),o("div",ge,[l(e(c),{required:""},{default:n(()=>[u(d(e(a)("datatable.quality")),1)]),_:1}),l(T,{id:"quality_ids",modelValue:e(t).quality_ids,"onUpdate:modelValue":r[6]||(r[6]=s=>e(t).quality_ids=s),options:i.qualities,autoLocalizedLabel:"",optionValue:"id",placeholder:e(a)("datatable.select_quality"),class:"w-full",showClear:!0,filter:"",error:e(t).errors.quality_id??null,filterPlaceholder:e(a)("datatable.search"),maxSelectedLabels:1,showToggleAll:!1},null,8,["modelValue","options","placeholder","error","filterPlaceholder"]),l(f,{message:e(t).errors.quality_id},null,8,["message"]),l(g,{text:e(a)("datatable.quality_hint")},null,8,["text"])])]),o("div",he,[o("div",be,[l(e(c),{for:"description_en"},{default:n(()=>[u(d(e(a)("datatable.description_en")),1)]),_:1}),l(F,{id:"description_en",modelValue:e(t).description_en,"onUpdate:modelValue":r[7]||(r[7]=s=>e(t).description_en=s),placeholder:e(a)("datatable.description_en_placeholder"),error:e(t).errors.description_en,rows:4},null,8,["modelValue","placeholder","error"]),l(f,{message:e(t).errors.description_en},null,8,["message"])]),o("div",ve,[l(e(c),{for:"description_ar"},{default:n(()=>[u(d(e(a)("datatable.description_ar")),1)]),_:1}),l(F,{id:"description_ar",modelValue:e(t).description_ar,"onUpdate:modelValue":r[8]||(r[8]=s=>e(t).description_ar=s),placeholder:e(a)("datatable.description_ar_placeholder"),error:e(t).errors.description_ar,rows:4},null,8,["modelValue","placeholder","error"]),l(f,{message:e(t).errors.description_ar},null,8,["message"])])]),o("div",ye,[l(e(c),{for:"status"},{default:n(()=>[u(d(e(a)("datatable.status")),1)]),_:1}),l(D,{id:"status",modelValue:e(t).status,"onUpdate:modelValue":r[9]||(r[9]=s=>e(t).status=s),error:e(t).errors.status,label:e(t).status?e(a)("datatable.active"):e(a)("datatable.inactive"),hint:e(a)("datatable.status_hint")},null,8,["modelValue","error","label","hint"]),l(f,{message:e(t).errors.status},null,8,["message"])]),o("div",Ve,[l(e(c),{for:"placement_image"},{default:n(()=>[u(d(e(a)("datatable.placement_image")),1)]),_:1}),l(C,{id:"placement_image",modelValue:e(t).placement_image,"onUpdate:modelValue":r[10]||(r[10]=s=>e(t).placement_image=s),multiple:!1,accept:"image/*",context:"product-placement"},null,8,["modelValue"]),l(g,{text:e(a)("datatable.placement_image_hint")},null,8,["text"]),l(f,{message:e(t).errors.placement_image},null,8,["message"])]),o("div",xe,[o("div",null,[o("h3",we,d(e(a)("datatable.variant_type")),1),o("p",qe,d(e(a)("datatable.variant_type_hint")),1)]),o("div",ke,[o("div",ze,[U(o("input",{type:"radio",id:"variant_color",value:"color","onUpdate:modelValue":r[11]||(r[11]=s=>p.value=s),class:"h-4 w-4"},null,512),[[$,p.value]]),l(e(c),{for:"variant_color",class:"cursor-pointer font-normal"},{default:n(()=>[u(d(e(a)("datatable.color_only")),1)]),_:1})]),o("div",Ue,[U(o("input",{type:"radio",id:"variant_size",value:"size","onUpdate:modelValue":r[12]||(r[12]=s=>p.value=s),class:"h-4 w-4"},null,512),[[$,p.value]]),l(e(c),{for:"variant_size",class:"cursor-pointer font-normal"},{default:n(()=>[u(d(e(a)("datatable.size_only")),1)]),_:1})]),o("div",$e,[U(o("input",{type:"radio",id:"variant_both",value:"both","onUpdate:modelValue":r[13]||(r[13]=s=>p.value=s),class:"h-4 w-4"},null,512),[[$,p.value]]),l(e(c),{for:"variant_both",class:"cursor-pointer font-normal"},{default:n(()=>[u(d(e(a)("datatable.color_and_size")),1)]),_:1})])])]),p.value==="size"?(h(),b("div",Ce,[l(e(c),{for:"temp_files"},{default:n(()=>[u(d(e(a)("datatable.featured_image")),1)]),_:1}),l(C,{id:"temp_files",modelValue:e(t).temp_files,"onUpdate:modelValue":r[14]||(r[14]=s=>e(t).temp_files=s),multiple:!1,accept:"image/*",context:"products"},null,8,["modelValue"]),l(g,{text:e(a)("datatable.featured_image_hint")},null,8,["text"]),l(f,{message:e(t).errors.temp_files},null,8,["message"])])):x("",!0),o("div",De,[o("div",Pe,[o("div",null,[o("h3",Le,d(e(a)("datatable.product_variants")),1),o("p",Se,d(e(a)("datatable.product_variants_hint")),1)]),l(k,{type:"button",onClick:j,variant:"outline",size:"sm"},{default:n(()=>[l(e(ae),{class:"mr-2 h-4 w-4"}),u(" "+d(e(a)("datatable.add_variant")),1)]),_:1})]),l(f,{message:e(t).errors.variants},null,8,["message"]),v.value.length===0?(h(),b("div",Te,[o("p",Fe,d(e(a)("datatable.no_variants_added")),1)])):x("",!0),(h(!0),b(X,null,Y(v.value,(s,m)=>(h(),b("div",{key:s.id,class:"space-y-4 rounded-lg border p-4"},[o("div",Me,[o("h4",je,d(e(a)("datatable.variant"))+" #"+d(m+1),1),l(k,{type:"button",onClick:_=>B(m),variant:"ghost",size:"sm"},{default:n(()=>[l(e(te),{class:"h-4 w-4 text-destructive"})]),_:2},1032,["onClick"])]),o("div",Be,[N.value?(h(),b("div",Ne,[l(e(c),{required:""},{default:n(()=>[u(d(e(a)("datatable.color")),1)]),_:1}),l(y,{id:`color_${m}`,modelValue:s.color_id,"onUpdate:modelValue":_=>s.color_id=_,options:i.colors,autoLocalizedLabel:"",optionValue:"id",placeholder:e(a)("datatable.select_color"),class:"w-full",showClear:!0,filter:"",filterPlaceholder:e(a)("datatable.search")},null,8,["id","modelValue","onUpdate:modelValue","options","placeholder","filterPlaceholder"])])):x("",!0),A.value?(h(),b("div",Ae,[l(e(c),{required:""},{default:n(()=>[u(d(e(a)("datatable.size")),1)]),_:1}),l(y,{id:`size_${m}`,modelValue:s.size_id,"onUpdate:modelValue":_=>s.size_id=_,options:i.sizes,autoLocalizedLabel:"",optionValue:"id",placeholder:e(a)("datatable.select_size"),class:"w-full",showClear:!0,filter:"",filterPlaceholder:e(a)("datatable.search")},null,8,["id","modelValue","onUpdate:modelValue","options","placeholder","filterPlaceholder"])])):x("",!0),o("div",Ee,[l(e(c),{for:`price_${m}`,required:""},{default:n(()=>[u(d(e(a)("datatable.price")),1)]),_:2},1032,["for"]),l(w,{id:`price_${m}`,modelValue:s.price,"onUpdate:modelValue":_=>s.price=_,type:"number",step:"0.01",placeholder:e(a)("datatable.price_placeholder")},null,8,["id","modelValue","onUpdate:modelValue","placeholder"])])]),E.value?(h(),b("div",Ie,[l(e(c),{for:`image_${m}`},{default:n(()=>[u(d(e(a)("datatable.variant_image")),1)]),_:2},1032,["for"]),l(C,{id:`image_${m}`,modelValue:s.temp_files,"onUpdate:modelValue":_=>s.temp_files=_,multiple:!1,accept:"image/*",context:"product-variants"},null,8,["id","modelValue","onUpdate:modelValue"]),l(g,{text:e(a)("datatable.variant_image_hint")},null,8,["text"])])):x("",!0),o("div",He,[l(e(c),{for:`variant_status_${m}`},{default:n(()=>[u(d(e(a)("datatable.status")),1)]),_:2},1032,["for"]),l(D,{id:`variant_status_${m}`,modelValue:s.status,"onUpdate:modelValue":_=>s.status=_,label:s.status?e(a)("datatable.active"):e(a)("datatable.inactive"),size:"small"},null,8,["id","modelValue","onUpdate:modelValue","label"])])]))),128))])],32)]),_:1},8,["title","description","back-href"])}}});export{ka as default};
