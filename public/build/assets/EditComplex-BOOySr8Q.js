import{d as I,A as P,C as H,I as L,E as k,O as W,f as O,o as v,w as n,a as t,b as o,u as e,m as R,h as G,c as y,e as x,t as i,g as u,l as q,S as U,F as J,D as K,W as Q}from"./app-BLvqcGW3.js";import{_ as w}from"./DashboardButton.vue_vue_type_script_setup_true_lang-CkgpKmAW.js";import{D as $}from"./DashboardFileUpload-Dt7jMCrv.js";import{_ as T}from"./DashboardMultiSelect.vue_vue_type_style_index_1_lang-BYVupNOr.js";import{D as z}from"./DashboardTextInput-CWKYOY4v.js";import{D as F}from"./DashboardTextarea-D08P23UF.js";import{D as C}from"./DashboardToggle-BgN_Zj7e.js";import{_ as h}from"./Hint.vue_vue_type_script_setup_true_lang-BpbTqRav.js";import{_ as a}from"./translations-CHj0IjNl.js";import{_ as X}from"./ActionLayout.vue_vue_type_script_setup_true_lang-Fmuhp8v9.js";import{_}from"./InputError.vue_vue_type_script_setup_true_lang-DaSrKUd3.js";import{_ as p}from"./Label.vue_vue_type_script_setup_true_lang-B0r9Bzz-.js";import{P as Y}from"./plus-BKGSru3F.js";import{T as Z}from"./trash-2-BkExQwR3.js";import"./index-D5Kq-RR9.js";import"./createLucideIcon-DaWsEudp.js";import"./index-CSYhC9wE.js";import"./index-CW2OTQQQ.js";import"./index-CN3Bt6Ta.js";import"./index-CoHzRWMm.js";import"./index-D_fOJs2O.js";import"./upload-CSBvCLkC.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-Bw54K75D.js";import"./index-DLkRj0Y6.js";import"./index-oY5pzE6t.js";import"./Switch.vue_vue_type_script_setup_true_lang-Bl-mZlJ5.js";import"./Heading.vue_vue_type_script_setup_true_lang-YTj8ID6E.js";import"./Card.vue_vue_type_script_setup_true_lang-D5CuwiOU.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-fRk2Fftf.js";import"./AdminLayout.vue_vue_type_script_setup_true_lang-DKoU4_Ix.js";import"./useGuard-Bs-GSLa9.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-B4LOU7g8.js";import"./check-DBjaRxV-.js";const ee={class:"rounded-lg border border-dashed border-muted-foreground/30 bg-muted/10 p-4"},te={class:"flex items-center gap-3"},ae={class:"flex-1"},le={class:"text-sm font-semibold"},se={class:"text-xs text-muted-foreground"},oe={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},re={class:"space-y-2"},de={class:"space-y-2"},ie={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},ne={class:"space-y-2"},ue={class:"space-y-2"},ce={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},pe={class:"space-y-2"},me={class:"space-y-2"},_e={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},ge={class:"space-y-2"},fe={class:"space-y-2"},he={class:"space-y-2"},be={class:"space-y-2"},ve={class:"space-y-4 rounded-lg border border-dashed border-primary/30 bg-primary/5 p-4"},ye={class:"text-sm font-semibold"},Ve={class:"text-xs text-muted-foreground"},xe={class:"flex gap-4"},ze={class:"flex items-center gap-2"},we={class:"flex items-center gap-2"},ke={class:"flex items-center gap-2"},qe={key:0,class:"space-y-2"},Ue={class:"space-y-4"},$e={class:"flex items-center justify-between"},Ce={class:"text-lg font-semibold"},De={class:"text-sm text-muted-foreground"},Pe={key:0,class:"rounded-lg border border-dashed border-muted-foreground/30 bg-muted/10 p-8 text-center"},Le={class:"text-sm text-muted-foreground"},Te={class:"flex items-center justify-between"},Fe={class:"font-semibold"},Se={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},Me={key:0,class:"space-y-2"},je={key:1,class:"space-y-2"},Be={class:"space-y-2"},Ee={key:0,class:"space-y-2"},Ne={class:"space-y-2"},Ae={class:"flex justify-end gap-2"},zt=I({__name:"EditComplex",props:{product:{},categories:{},qualities:{},colors:{},sizes:{},existingVariants:{},existingPlacementFiles:{},existingFiles:{}},setup(S){const c=S,m=P((()=>{const d=c.existingVariants.some(b=>b.color_id),s=c.existingVariants.some(b=>b.size_id);return d&&s?"both":s?"size":"color"})()),V=P(c.existingVariants.map(d=>({id:d.id,color_id:d.color_id,size_id:d.size_id,price:d.price,status:d.status,temp_files:d.existing_media||[],existing_media:d.existing_media||[]}))),l=H({name_en:c.product.name_en,name_ar:c.product.name_ar,slug:c.product.slug,description_en:c.product.description_en||"",description_ar:c.product.description_ar||"",category_ids:c.product.category_id?[c.product.category_id]:[],quality_ids:c.product.quality_id?[c.product.quality_id]:[],sku:c.product.sku,has_variants:!0,status:c.product.status,temp_files:c.existingFiles||[],placement_image:c.existingPlacementFiles||[],variants:[]});L(()=>l.category_ids,d=>{d&&d.length>1&&(l.category_ids=[d[d.length-1]])}),L(()=>l.quality_ids,d=>{d&&d.length>1&&(l.quality_ids=[d[d.length-1]])});const M=()=>{V.value.push({id:`variant-${Date.now()}`,color_id:null,size_id:null,price:null,status:!0,temp_files:[]})},j=d=>{V.value.splice(d,1)},B=k(()=>m.value==="color"||m.value==="both"),E=k(()=>m.value==="size"||m.value==="both"),N=k(()=>m.value==="color"||m.value==="both"),D=()=>{l.variants=V.value.map(s=>({id:typeof s.id=="number"?s.id:null,color_id:s.color_id,size_id:s.size_id,price:s.price,status:s.status,temp_files:s.temp_files.filter(b=>b.temp_path),existing_media:s.existing_media||[]}));const d={...l.data(),category_id:l.category_ids.length>0?l.category_ids[0]:null,quality_id:l.quality_ids.length>0?l.quality_ids[0]:null};delete d.category_ids,delete d.quality_ids,l.transform(()=>d).put(route("super-admin.products.update-complex",c.product.id),{onError:s=>{console.error("Validation errors:",s)},onSuccess:()=>{console.log("Product updated successfully")}})},A=[{title:a("sidebar.products"),href:route("super-admin.products.index")},{title:c.product.name_en,href:"#"}];return(d,s)=>{const b=W("DashboardSelect");return v(),O(X,{type:"edit",title:e(a)("datatable.products.title"),description:e(a)("datatable.products.edit_description"),breadcrumbs:A,"back-href":d.route("super-admin.products.index"),"show-card":!1,"max-width":"full"},{footer:n(()=>[o("div",Ae,[t(w,{onClick:s[15]||(s[15]=r=>e(Q).visit(d.route("super-admin.products.index"))),variant:"secondary",disabled:e(l).processing},{default:n(()=>[u(i(e(a)("datatable.cancel")),1)]),_:1},8,["disabled"]),t(w,{onClick:D,loading:e(l).processing,variant:"default"},{default:n(()=>[u(i(e(a)("datatable.update")),1)]),_:1},8,["loading"])])]),default:n(()=>[t(e(R),{title:`${e(a)("datatable.edit")} ${c.product.name_en}`},null,8,["title"]),o("form",{onSubmit:G(D,["prevent"]),class:"space-y-6"},[o("div",ee,[o("div",te,[s[16]||(s[16]=o("div",{class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z"})])],-1)),o("div",ae,[o("h3",le,i(e(a)("datatable.complex_product")),1),o("p",se,i(e(a)("datatable.complex_product_description")),1)]),t(C,{id:"has_variants",modelValue:e(l).has_variants,"onUpdate:modelValue":s[0]||(s[0]=r=>e(l).has_variants=r),disabled:"",label:e(a)("datatable.variants_enabled"),size:"small"},null,8,["modelValue","label"])])]),o("div",oe,[o("div",re,[t(e(p),{for:"name_en",required:""},{default:n(()=>[u(i(e(a)("datatable.name_en")),1)]),_:1}),t(z,{id:"name_en",modelValue:e(l).name_en,"onUpdate:modelValue":s[1]||(s[1]=r=>e(l).name_en=r),type:"text",placeholder:e(a)("datatable.name_en_placeholder"),error:e(l).errors.name_en,autofocus:"",required:""},null,8,["modelValue","placeholder","error"]),t(_,{message:e(l).errors.name_en},null,8,["message"]),t(h,{text:e(a)("datatable.name_en_hint")},null,8,["text"])]),o("div",de,[t(e(p),{for:"name_ar",required:""},{default:n(()=>[u(i(e(a)("datatable.name_ar")),1)]),_:1}),t(z,{id:"name_ar",modelValue:e(l).name_ar,"onUpdate:modelValue":s[2]||(s[2]=r=>e(l).name_ar=r),type:"text",placeholder:e(a)("datatable.name_ar_placeholder"),error:e(l).errors.name_ar,required:""},null,8,["modelValue","placeholder","error"]),t(_,{message:e(l).errors.name_ar},null,8,["message"]),t(h,{text:e(a)("datatable.name_ar_hint")},null,8,["text"])])]),o("div",ie,[o("div",ne,[t(e(p),{for:"slug",required:""},{default:n(()=>[u(i(e(a)("datatable.slug")),1)]),_:1}),t(z,{id:"slug",modelValue:e(l).slug,"onUpdate:modelValue":s[3]||(s[3]=r=>e(l).slug=r),type:"text",placeholder:e(a)("datatable.slug_placeholder"),error:e(l).errors.slug,disabled:""},null,8,["modelValue","placeholder","error"]),t(_,{message:e(l).errors.slug},null,8,["message"]),t(h,{text:e(a)("datatable.slug_auto_hint")},null,8,["text"])]),o("div",ue,[t(e(p),{for:"sku",required:""},{default:n(()=>[u(i(e(a)("datatable.sku")),1)]),_:1}),t(z,{id:"sku",modelValue:e(l).sku,"onUpdate:modelValue":s[4]||(s[4]=r=>e(l).sku=r),type:"text",placeholder:e(a)("datatable.sku_placeholder"),error:e(l).errors.sku,disabled:""},null,8,["modelValue","placeholder","error"]),t(_,{message:e(l).errors.sku},null,8,["message"]),t(h,{text:e(a)("datatable.sku_auto_hint")},null,8,["text"])])]),o("div",ce,[o("div",pe,[t(e(p),{required:""},{default:n(()=>[u(i(e(a)("datatable.category")),1)]),_:1}),t(T,{id:"category_ids",modelValue:e(l).category_ids,"onUpdate:modelValue":s[5]||(s[5]=r=>e(l).category_ids=r),options:d.categories,autoLocalizedLabel:"",optionValue:"id",placeholder:e(a)("datatable.select_category"),class:"w-full",showClear:!0,filter:"",error:e(l).errors.category_id??null,filterPlaceholder:e(a)("datatable.search"),maxSelectedLabels:1,showToggleAll:!1},null,8,["modelValue","options","placeholder","error","filterPlaceholder"]),t(_,{message:e(l).errors.category_id},null,8,["message"]),t(h,{text:e(a)("datatable.category_hint")},null,8,["text"])]),o("div",me,[t(e(p),{required:""},{default:n(()=>[u(i(e(a)("datatable.quality")),1)]),_:1}),t(T,{id:"quality_ids",modelValue:e(l).quality_ids,"onUpdate:modelValue":s[6]||(s[6]=r=>e(l).quality_ids=r),options:d.qualities,autoLocalizedLabel:"",optionValue:"id",placeholder:e(a)("datatable.select_quality"),class:"w-full",showClear:!0,filter:"",error:e(l).errors.quality_id??null,filterPlaceholder:e(a)("datatable.search"),maxSelectedLabels:1,showToggleAll:!1},null,8,["modelValue","options","placeholder","error","filterPlaceholder"]),t(_,{message:e(l).errors.quality_id},null,8,["message"]),t(h,{text:e(a)("datatable.quality_hint")},null,8,["text"])])]),o("div",_e,[o("div",ge,[t(e(p),{for:"description_en"},{default:n(()=>[u(i(e(a)("datatable.description_en")),1)]),_:1}),t(F,{id:"description_en",modelValue:e(l).description_en,"onUpdate:modelValue":s[7]||(s[7]=r=>e(l).description_en=r),placeholder:e(a)("datatable.description_en_placeholder"),error:e(l).errors.description_en,rows:4},null,8,["modelValue","placeholder","error"]),t(_,{message:e(l).errors.description_en},null,8,["message"])]),o("div",fe,[t(e(p),{for:"description_ar"},{default:n(()=>[u(i(e(a)("datatable.description_ar")),1)]),_:1}),t(F,{id:"description_ar",modelValue:e(l).description_ar,"onUpdate:modelValue":s[8]||(s[8]=r=>e(l).description_ar=r),placeholder:e(a)("datatable.description_ar_placeholder"),error:e(l).errors.description_ar,rows:4},null,8,["modelValue","placeholder","error"]),t(_,{message:e(l).errors.description_ar},null,8,["message"])])]),o("div",he,[t(e(p),{for:"status"},{default:n(()=>[u(i(e(a)("datatable.status")),1)]),_:1}),t(C,{id:"status",modelValue:e(l).status,"onUpdate:modelValue":s[9]||(s[9]=r=>e(l).status=r),error:e(l).errors.status,label:e(l).status?e(a)("datatable.active"):e(a)("datatable.inactive"),hint:e(a)("datatable.status_hint")},null,8,["modelValue","error","label","hint"]),t(_,{message:e(l).errors.status},null,8,["message"])]),o("div",be,[t(e(p),{for:"placement_image"},{default:n(()=>[u(i(e(a)("datatable.placement_image")),1)]),_:1}),t($,{id:"placement_image",modelValue:e(l).placement_image,"onUpdate:modelValue":s[10]||(s[10]=r=>e(l).placement_image=r),multiple:!1,accept:"image/*",context:"product-placement"},null,8,["modelValue"]),t(h,{text:e(a)("datatable.placement_image_hint")},null,8,["text"]),t(_,{message:e(l).errors.placement_image},null,8,["message"])]),o("div",ve,[o("div",null,[o("h3",ye,i(e(a)("datatable.variant_type")),1),o("p",Ve,i(e(a)("datatable.variant_type_hint")),1)]),o("div",xe,[o("div",ze,[q(o("input",{type:"radio",id:"variant_color",value:"color","onUpdate:modelValue":s[11]||(s[11]=r=>m.value=r),class:"h-4 w-4"},null,512),[[U,m.value]]),t(e(p),{for:"variant_color",class:"cursor-pointer font-normal"},{default:n(()=>[u(i(e(a)("datatable.color_only")),1)]),_:1})]),o("div",we,[q(o("input",{type:"radio",id:"variant_size",value:"size","onUpdate:modelValue":s[12]||(s[12]=r=>m.value=r),class:"h-4 w-4"},null,512),[[U,m.value]]),t(e(p),{for:"variant_size",class:"cursor-pointer font-normal"},{default:n(()=>[u(i(e(a)("datatable.size_only")),1)]),_:1})]),o("div",ke,[q(o("input",{type:"radio",id:"variant_both",value:"both","onUpdate:modelValue":s[13]||(s[13]=r=>m.value=r),class:"h-4 w-4"},null,512),[[U,m.value]]),t(e(p),{for:"variant_both",class:"cursor-pointer font-normal"},{default:n(()=>[u(i(e(a)("datatable.color_and_size")),1)]),_:1})])])]),m.value==="size"?(v(),y("div",qe,[t(e(p),{for:"temp_files"},{default:n(()=>[u(i(e(a)("datatable.featured_image")),1)]),_:1}),t($,{id:"temp_files",modelValue:e(l).temp_files,"onUpdate:modelValue":s[14]||(s[14]=r=>e(l).temp_files=r),multiple:!1,accept:"image/*",context:"products"},null,8,["modelValue"]),t(h,{text:e(a)("datatable.featured_image_hint")},null,8,["text"]),t(_,{message:e(l).errors.temp_files},null,8,["message"])])):x("",!0),o("div",Ue,[o("div",$e,[o("div",null,[o("h3",Ce,i(e(a)("datatable.product_variants")),1),o("p",De,i(e(a)("datatable.product_variants_hint")),1)]),t(w,{type:"button",onClick:M,variant:"outline",size:"sm"},{default:n(()=>[t(e(Y),{class:"mr-2 h-4 w-4"}),u(" "+i(e(a)("datatable.add_variant")),1)]),_:1})]),t(_,{message:e(l).errors.variants},null,8,["message"]),V.value.length===0?(v(),y("div",Pe,[o("p",Le,i(e(a)("datatable.no_variants_added")),1)])):x("",!0),(v(!0),y(J,null,K(V.value,(r,g)=>(v(),y("div",{key:r.id,class:"space-y-4 rounded-lg border p-4"},[o("div",Te,[o("h4",Fe,i(e(a)("datatable.variant"))+" #"+i(g+1),1),t(w,{type:"button",onClick:f=>j(g),variant:"ghost",size:"sm"},{default:n(()=>[t(e(Z),{class:"h-4 w-4 text-destructive"})]),_:2},1032,["onClick"])]),o("div",Se,[B.value?(v(),y("div",Me,[t(e(p),{required:""},{default:n(()=>[u(i(e(a)("datatable.color")),1)]),_:1}),t(b,{id:`color_${g}`,modelValue:r.color_id,"onUpdate:modelValue":f=>r.color_id=f,options:d.colors,autoLocalizedLabel:"",optionValue:"id",placeholder:e(a)("datatable.select_color"),class:"w-full",showClear:!0,filter:"",filterPlaceholder:e(a)("datatable.search")},null,8,["id","modelValue","onUpdate:modelValue","options","placeholder","filterPlaceholder"])])):x("",!0),E.value?(v(),y("div",je,[t(e(p),{required:""},{default:n(()=>[u(i(e(a)("datatable.size")),1)]),_:1}),t(b,{id:`size_${g}`,modelValue:r.size_id,"onUpdate:modelValue":f=>r.size_id=f,options:d.sizes,autoLocalizedLabel:"",optionValue:"id",placeholder:e(a)("datatable.select_size"),class:"w-full",showClear:!0,filter:"",filterPlaceholder:e(a)("datatable.search")},null,8,["id","modelValue","onUpdate:modelValue","options","placeholder","filterPlaceholder"])])):x("",!0),o("div",Be,[t(e(p),{for:`price_${g}`,required:""},{default:n(()=>[u(i(e(a)("datatable.price")),1)]),_:2},1032,["for"]),t(z,{id:`price_${g}`,modelValue:r.price,"onUpdate:modelValue":f=>r.price=f,type:"number",step:"0.01",placeholder:e(a)("datatable.price_placeholder")},null,8,["id","modelValue","onUpdate:modelValue","placeholder"])])]),N.value?(v(),y("div",Ee,[t(e(p),{for:`image_${g}`},{default:n(()=>[u(i(e(a)("datatable.variant_image")),1)]),_:2},1032,["for"]),t($,{id:`image_${g}`,modelValue:r.temp_files,"onUpdate:modelValue":f=>r.temp_files=f,multiple:!1,accept:"image/*",context:"product-variants"},null,8,["id","modelValue","onUpdate:modelValue"]),t(h,{text:e(a)("datatable.variant_image_hint")},null,8,["text"])])):x("",!0),o("div",Ne,[t(e(p),{for:`variant_status_${g}`},{default:n(()=>[u(i(e(a)("datatable.status")),1)]),_:2},1032,["for"]),t(C,{id:`variant_status_${g}`,modelValue:r.status,"onUpdate:modelValue":f=>r.status=f,label:r.status?e(a)("datatable.active"):e(a)("datatable.inactive"),size:"small"},null,8,["id","modelValue","onUpdate:modelValue","label"])])]))),128))])],32)]),_:1},8,["title","description","back-href"])}}});export{zt as default};
