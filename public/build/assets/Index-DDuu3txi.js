import{c as O,a as L,t as E,g as H,d as W,b as q,u as G,e as J,D as K,_ as Q,f as h}from"./index-BW-UAAHL.js";import{u as F,_ as X}from"./useToast-CtOIdxR-.js";import{_ as Y}from"./DashboardButton.vue_vue_type_script_setup_true_lang-jdvaR_3Y.js";import{_ as w}from"./DashboardDatePicker.vue_vue_type_style_index_0_lang-3c7o6w-E.js";import{_ as Z}from"./DashboardSelect.vue_vue_type_style_index_1_lang-CJ5jZZRb.js";import{p as D}from"./parsers-DcDh6GPu.js";import{d as ee,j as te,k as se,f as S,o as p,w as m,a as r,b as o,u as e,m as oe,c as V,e as _,t as g,g as v,p as ie}from"./app-C_9PBI8O.js";import{_ as ae}from"./AdminLayout.vue_vue_type_script_setup_true_lang-zQel-0qJ.js";import{_ as k}from"./index-DmYhWnlU.js";import{C as re}from"./copy-DDU0OimM.js";import{T as le}from"./trash-2-BLGLvqc7.js";import"./index-D-urzs1U.js";import"./createLucideIcon-C0ithsll.js";import"./Card.vue_vue_type_script_setup_true_lang-CdHN0ZfT.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-vhl8EJLP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BxeelRGj.js";import"./Switch.vue_vue_type_script_setup_true_lang-DlH5kZNA.js";import"./index-CKRth63G.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-B3JVcvq7.js";import"./refresh-cw-Dd2PsCct.js";import"./index-XY12mXXh.js";import"./index-BMs6oOoE.js";import"./index-BGfNR6OY.js";import"./index-wI7wi_Ra.js";import"./index-COJUaldu.js";import"./index-Dz822CN2.js";import"./index-DsHA7fuX.js";import"./useGuard-BknsbsIw.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DnC3vUMI.js";function ne(c){const{showCopyToClipboardToast:l}=F();return O([L("#",{startFrom:1}),E("name","Permission",{sortable:!0,searchable:!0,visible:!0,className:"font-medium font-bold"}),H("roles","Roles"),W("created_at","Created",{relative:!0}),q([{label:"Copy ID",icon:re,onClick:n=>{navigator.clipboard.writeText(n.id.toString()),l("Permission ID")}},{separator:!0,label:"Separator"},{label:"Delete",icon:le,destructive:!0,onClick:n=>{c(n)}}])])}const me={class:"p-4"},de={key:0,class:"flex items-center gap-2"},pe={class:"space-y-4"},ce={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},ue={class:"space-y-2"},fe={class:"space-y-2"},_e={class:"space-y-2"},ge={class:"flex items-center justify-between border-t pt-4"},ve={class:"text-sm text-muted-foreground"},be={key:0},Ce={class:"flex gap-2"},Qe=ee({__name:"Index",props:{permissions:{},filters:{},roles:{}},setup(c){const l=c,n=()=>{const s=l.filters;return{...s,role:s!=null&&s.role?Number(s.role):null,created_from:D(s==null?void 0:s.created_from),created_to:D(s==null?void 0:s.created_to)}},{localFilters:i,isFilteringLoading:b,hasActiveFilters:u,activeFilterCount:d,applyFilters:T,clearFilters:P,updateFilters:$}=G(n(),{routeName:"super-admin.permissions.index",preserveState:!1,preserveScroll:!0});te(()=>l.filters,s=>{s&&$(n())},{deep:!0});const N=l.roles.map(s=>({name:s.name,id:s.id})),R=()=>{i.value.created_from&&(i.value.created_from=h(i.value.created_from)),i.value.created_to&&(i.value.created_to=h(i.value.created_to)),T()},z={searchable:!0,searchPlaceholder:"Search permissions by name...",selectable:!0,columnVisibility:!0,perPageSelector:!0,perPageOptions:[10,25,50,100],serverSide:!0,pagination:l.permissions,filterable:!0,filters:{...l.filters,direction:l.filters.direction},routeName:"super-admin.permissions.index"},B=()=>{},{initFlashToasts:U}=F();se(()=>{U()});const j=()=>{},A=[{title:"Permissions",href:route("super-admin.permissions.index")}],{deleteDialogOpen:f,itemToDelete:C,openDeleteDialog:I}=J(),M=ne(I);return(s,t)=>(p(),S(ae,{breadcrumbs:A},{default:m(()=>{var y,x;return[r(e(oe),{title:"Permissions"}),o("div",me,[t[9]||(t[9]=o("div",{class:"mb-6 flex items-center justify-between"},[o("div",null,[o("h1",{class:"text-3xl font-bold"},"Permissions"),o("p",{class:"mt-1 text-muted-foreground"},"View all system permissions and their assigned roles")])],-1)),r(K,{columns:e(M),data:s.permissions.data,config:z,onSelectionChange:B,onRowClick:j},{toolbar:m(({table:a})=>[e(u)?(p(),V("div",de,[r(e(Q),{value:`${e(d)} ${e(d)===1?"filter":"filters"} active`,severity:"info"},null,8,["value"])])):_("",!0),a.getFilteredSelectedRowModel().rows.length>0?(p(),S(e(k),{key:1,variant:"secondary",size:"sm"},{default:m(()=>[v(" Selected ("+g(a.getFilteredSelectedRowModel().rows.length)+") ",1)]),_:2},1024)):_("",!0)]),filters:m(()=>[o("div",pe,[o("div",ce,[o("div",ue,[t[4]||(t[4]=o("label",{class:"text-sm font-medium"},"Filter by Role",-1)),r(Z,{modelValue:e(i).role,"onUpdate:modelValue":t[0]||(t[0]=a=>e(i).role=a),options:e(N),optionLabel:"name",optionValue:"id",placeholder:"All Roles",class:"w-full",size:"small",showClear:!0,filter:"",filterPlaceholder:"Search...",scrollHeight:"100px"},null,8,["modelValue","options"])]),o("div",fe,[t[5]||(t[5]=o("label",{class:"text-sm font-medium"},"Created From",-1)),r(w,{modelValue:e(i).created_from,"onUpdate:modelValue":t[1]||(t[1]=a=>e(i).created_from=a),placeholder:"Select Created From",size:"small","icon-display":"input"},null,8,["modelValue"])]),o("div",_e,[t[6]||(t[6]=o("label",{class:"text-sm font-medium"},"Created To",-1)),r(w,{modelValue:e(i).created_to,"onUpdate:modelValue":t[2]||(t[2]=a=>e(i).created_to=a),placeholder:"Select Created To",size:"small","icon-display":"input"},null,8,["modelValue"])])]),o("div",ge,[o("div",ve,[e(u)?(p(),V("span",be,g(e(d))+" "+g(e(d)===1?"filter":"filters")+" applied ",1)):_("",!0)]),o("div",Ce,[r(e(k),{onClick:e(P),variant:"ghost",size:"sm",disabled:!e(u)||e(b)},{default:m(()=>[...t[7]||(t[7]=[v(" Clear All ",-1)])]),_:1},8,["onClick","disabled"]),r(Y,{onClick:R,size:"sm",variant:"default",loading:e(b)},{default:m(()=>[...t[8]||(t[8]=[v("Filter",-1)])]),_:1},8,["loading"])])])])]),_:1},8,["columns","data"]),r(X,{open:e(f),"onUpdate:open":t[3]||(t[3]=a=>ie(f)?f.value=a:null),"item-id":((y=e(C))==null?void 0:y.id)??null,"item-name":(x=e(C))==null?void 0:x.name,"route-name":"super-admin.permissions.destroy",title:"Delete Permission"},null,8,["open","item-id","item-name"])])]}),_:1}))}});export{Qe as default};
