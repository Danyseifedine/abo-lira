import{c as G,a as J,j as K,t as h,g as Q,h as X,d as Y,b as Z,u as ee,e as te,D as se,_ as ae,f as T}from"./index-BW-UAAHL.js";import{u as $,_ as oe}from"./useToast-CtOIdxR-.js";import{_ as U}from"./DashboardButton.vue_vue_type_script_setup_true_lang-jdvaR_3Y.js";import{_ as z}from"./DashboardDatePicker.vue_vue_type_style_index_0_lang-3c7o6w-E.js";import{_ as S}from"./DashboardSelect.vue_vue_type_style_index_1_lang-CJ5jZZRb.js";import{p as A}from"./parsers-DcDh6GPu.js";import{q as le,W as x,d as re,j as ie,k as ne,f as F,o as v,w as d,a as i,b as l,u as t,m as de,g,c as N,e as V,t as w,p as me}from"./app-C_9PBI8O.js";import{_ as ue}from"./AdminLayout.vue_vue_type_script_setup_true_lang-zQel-0qJ.js";import{_ as P}from"./index-DmYhWnlU.js";import{u as ce}from"./useGuard-BknsbsIw.js";import{c as pe}from"./converters-DLekJskJ.js";import{C as fe}from"./copy-DDU0OimM.js";import{E as ve}from"./eye-BCOMMbRf.js";import{S as ge}from"./square-pen-B6P9Gt_h.js";import{T as _e}from"./trash-2-BLGLvqc7.js";import{P as be}from"./plus-C3KgGLEl.js";import"./index-D-urzs1U.js";import"./createLucideIcon-C0ithsll.js";import"./Card.vue_vue_type_script_setup_true_lang-CdHN0ZfT.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-vhl8EJLP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BxeelRGj.js";import"./Switch.vue_vue_type_script_setup_true_lang-DlH5kZNA.js";import"./index-CKRth63G.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-B3JVcvq7.js";import"./refresh-cw-Dd2PsCct.js";import"./index-XY12mXXh.js";import"./index-BMs6oOoE.js";import"./index-BGfNR6OY.js";import"./index-wI7wi_Ra.js";import"./index-COJUaldu.js";import"./index-Dz822CN2.js";import"./index-DsHA7fuX.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DnC3vUMI.js";function Ce(_){const{showCopyToClipboardToast:n}=$(),{userIsSuperAdmin:m}=ce(),o=le(!1);return G([J("#",{startFrom:1}),K("avatar_url","Avatar",{size:"sm",shape:"circle",alt:a=>a.name,fallback:"/assets/images/default.jpg"}),h("name","Name",{sortable:!0,searchable:!0,visible:!0,className:"font-medium font-bold"}),h("email","Email",{sortable:!0,searchable:!0,className:"lowercase"}),Q("roles","Roles"),X("is_active","Active",{onToggle:(a,c,u)=>{x.patch(route("super-admin.users.toggle-status",c.id),{is_active:a},{preserveScroll:!0,preserveState:!0,onStart:()=>{o.value=!0},onFinish:()=>{o.value=!1},onSuccess:b=>{var f;const p=(f=b.props.flash)==null?void 0:f.toast;(p==null?void 0:p.success)===!1&&u.revert()}})},disabled:a=>m(a)||o.value,toggledWhen:a=>pe(a),size:"sm",className:"flex justify-start"}),h("email_verified_at","Status",{format:a=>a?"verified":"unverified"}),Y("created_at","Joined",{relative:!0}),Z([{label:"Copy ID",icon:fe,onClick:a=>{navigator.clipboard.writeText(a.id.toString()),n("User ID")}},{separator:!0,label:"Separator"},{label:"View",icon:ve,href:a=>route("super-admin.users.show",a.id)},{label:"Edit",icon:ge,href:a=>route("super-admin.users.edit",a.id)},{separator:!0,label:"Separator",show:a=>!m(a)},{show:a=>!m(a),label:"Delete",icon:_e,destructive:!0,onClick:a=>{_(a)}}])])}const he={class:"p-4"},Se={class:"mb-6 flex items-center justify-between"},Ve={key:0,class:"flex items-center gap-2"},we={class:"space-y-4"},xe={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-5"},ye={class:"space-y-2"},De={class:"space-y-2"},ke={class:"space-y-2"},Te={class:"space-y-2"},Ue={class:"space-y-2"},ze={class:"flex items-center justify-between border-t pt-4"},Ae={class:"text-sm text-muted-foreground"},Fe={key:0},Ne={class:"flex gap-2"},ft=re({__name:"Index",props:{users:{},filters:{},roles:{}},setup(_){const n=_,m=()=>{const s=n.filters;return{...s,role:(s==null?void 0:s.role)||"",status:(s==null?void 0:s.status)||"",email_verified:(s==null?void 0:s.email_verified)||"",created_from:A(s==null?void 0:s.created_from),created_to:A(s==null?void 0:s.created_to)}},{localFilters:o,isFilteringLoading:a,hasActiveFilters:c,activeFilterCount:u,applyFilters:b,clearFilters:p,updateFilters:f}=ee(m(),{routeName:"super-admin.users.index",preserveState:!1,preserveScroll:!0}),R=n.roles.map(s=>({name:s.name,id:s.id}));ie(()=>n.filters,s=>{s&&f(m())},{deep:!0});const j=[{name:"Active",code:"active"},{name:"Inactive",code:"inactive"}],B=[{name:"All",code:""},{name:"Verified",code:"true"},{name:"Not Verified",code:"false"}],E=()=>{o.value.created_from&&(o.value.created_from=T(o.value.created_from)),o.value.created_to&&(o.value.created_to=T(o.value.created_to)),b()},I={searchable:!0,searchPlaceholder:"Search users by name or email...",selectable:!0,columnVisibility:!0,perPageSelector:!0,perPageOptions:[10,25,50,100],serverSide:!0,pagination:n.users,filterable:!0,filters:{...n.filters,direction:n.filters.direction},routeName:"super-admin.users.index"},L=()=>{},{initFlashToasts:O}=$();ne(()=>{O()});const M=s=>{x.get(route("super-admin.users.show",s))},W=[{title:"Users",href:route("super-admin.users.index")}],{deleteDialogOpen:C,itemToDelete:y,openDeleteDialog:H}=te(),q=Ce(H);return(s,e)=>(v(),F(ue,{breadcrumbs:W},{default:d(()=>{var D,k;return[i(t(de),{title:"Users"}),l("div",he,[l("div",Se,[e[8]||(e[8]=l("div",null,[l("h1",{class:"text-3xl font-bold"},"Users"),l("p",{class:"mt-1 text-muted-foreground"},"Manage system users and their permissions")],-1)),i(U,{variant:"default",onClick:e[0]||(e[0]=()=>t(x).get(s.route("super-admin.users.create")))},{default:d(()=>[i(t(be),{class:"mr-2 h-4 w-4"}),e[7]||(e[7]=g(" Add User ",-1))]),_:1})]),i(se,{columns:t(q),data:s.users.data,config:I,onSelectionChange:L,onRowClick:M},{toolbar:d(({table:r})=>[t(c)?(v(),N("div",Ve,[i(t(ae),{value:`${t(u)} ${t(u)===1?"filter":"filters"} active`,severity:"info"},null,8,["value"])])):V("",!0),r.getFilteredSelectedRowModel().rows.length>0?(v(),F(t(P),{key:1,variant:"destructive",size:"sm"},{default:d(()=>[g(" Delete ("+w(r.getFilteredSelectedRowModel().rows.length)+") ",1)]),_:2},1024)):V("",!0)]),filters:d(()=>[l("div",we,[l("div",xe,[l("div",ye,[e[9]||(e[9]=l("label",{class:"text-sm font-medium"},"Role",-1)),i(S,{modelValue:t(o).role,"onUpdate:modelValue":e[1]||(e[1]=r=>t(o).role=r),options:t(R),optionLabel:"name",optionValue:"id",placeholder:"All Roles",class:"w-full",size:"small",showClear:!0,filter:"",filterPlaceholder:"Search...",scrollHeight:"100px"},null,8,["modelValue","options"])]),l("div",De,[e[10]||(e[10]=l("label",{class:"text-sm font-medium"},"Status",-1)),i(S,{modelValue:t(o).status,"onUpdate:modelValue":e[2]||(e[2]=r=>t(o).status=r),options:j,optionLabel:"name",optionValue:"code",placeholder:"All Status",class:"w-full",size:"small",showClear:!0,filter:"",filterPlaceholder:"Search...",scrollHeight:"200px"},null,8,["modelValue"])]),l("div",ke,[e[11]||(e[11]=l("label",{class:"text-sm font-medium"},"Email Verification",-1)),i(S,{modelValue:t(o).email_verified,"onUpdate:modelValue":e[3]||(e[3]=r=>t(o).email_verified=r),options:B,optionLabel:"name",optionValue:"code",placeholder:"All",class:"w-full",size:"small",showClear:!0,filter:"",filterPlaceholder:"Search...",scrollHeight:"200px"},null,8,["modelValue"])]),l("div",Te,[e[12]||(e[12]=l("label",{class:"text-sm font-medium"},"Created From",-1)),i(z,{modelValue:t(o).created_from,"onUpdate:modelValue":e[4]||(e[4]=r=>t(o).created_from=r),placeholder:"Select Created From",size:"small","icon-display":"input"},null,8,["modelValue"])]),l("div",Ue,[e[13]||(e[13]=l("label",{class:"text-sm font-medium"},"Created To",-1)),i(z,{modelValue:t(o).created_to,"onUpdate:modelValue":e[5]||(e[5]=r=>t(o).created_to=r),placeholder:"Select Created To",size:"small","icon-display":"input"},null,8,["modelValue"])])]),l("div",ze,[l("div",Ae,[t(c)?(v(),N("span",Fe,w(t(u))+" "+w(t(u)===1?"filter":"filters")+" applied ",1)):V("",!0)]),l("div",Ne,[i(t(P),{onClick:t(p),variant:"ghost",size:"sm",disabled:!t(c)||t(a)},{default:d(()=>[...e[14]||(e[14]=[g(" Clear All ",-1)])]),_:1},8,["onClick","disabled"]),i(U,{onClick:E,size:"sm",variant:"default",loading:t(a)},{default:d(()=>[...e[15]||(e[15]=[g("Filter",-1)])]),_:1},8,["loading"])])])])]),_:1},8,["columns","data"]),i(oe,{open:t(C),"onUpdate:open":e[6]||(e[6]=r=>me(C)?C.value=r:null),"item-id":((D=t(y))==null?void 0:D.id)??null,"item-name":(k=t(y))==null?void 0:k.name,"route-name":"super-admin.users.destroy",title:"Delete User"},null,8,["open","item-id","item-name"])])]}),_:1}))}});export{ft as default};
