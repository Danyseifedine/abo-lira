import{c as O,a as R,t as v,g as A,d as H,b as I,u as W,e as q,D as G,_ as J,f as N}from"./index-BW-UAAHL.js";import{u as K,_ as Q}from"./useToast-CtOIdxR-.js";import{_ as X}from"./DashboardButton.vue_vue_type_script_setup_true_lang-jdvaR_3Y.js";import{_ as w}from"./DashboardDatePicker.vue_vue_type_style_index_0_lang-3c7o6w-E.js";import{_ as Y}from"./DashboardSelect.vue_vue_type_style_index_1_lang-CJ5jZZRb.js";import{p as V}from"./parsers-DcDh6GPu.js";import{_ as t}from"./index-D-urzs1U.js";import{d as Z,j as ee,k as te,f as k,o as _,w as c,a as d,b as a,u as e,m as ae,t as r,c as D,e as g,g as x,p as se}from"./app-C_9PBI8O.js";import{_ as le}from"./AdminLayout.vue_vue_type_script_setup_true_lang-zQel-0qJ.js";import{_ as F}from"./index-DmYhWnlU.js";import{E as oe}from"./eye-BCOMMbRf.js";import{T as re}from"./trash-2-BLGLvqc7.js";import"./Card.vue_vue_type_script_setup_true_lang-CdHN0ZfT.js";import"./createLucideIcon-C0ithsll.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-vhl8EJLP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BxeelRGj.js";import"./Switch.vue_vue_type_script_setup_true_lang-DlH5kZNA.js";import"./index-CKRth63G.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-B3JVcvq7.js";import"./refresh-cw-Dd2PsCct.js";import"./index-XY12mXXh.js";import"./index-BMs6oOoE.js";import"./index-BGfNR6OY.js";import"./index-wI7wi_Ra.js";import"./index-COJUaldu.js";import"./index-Dz822CN2.js";import"./index-DsHA7fuX.js";import"./useGuard-BknsbsIw.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DnC3vUMI.js";function ie(f,l){return O([R(l.number,{headerClassName:"text-start",startFrom:1}),v("f_name",l.f_name,{sortable:!0,searchable:!0,visible:!0,className:"font-medium text-start",headerClassName:"text-start"}),v("l_name",l.l_name,{sortable:!0,searchable:!0,visible:!0,className:"font-medium text-start",headerClassName:"text-start"}),v("phone_number",l.phone_number,{sortable:!0,searchable:!0,visible:!0,className:"text-start font-mono",headerClassName:"text-start"}),A("status",l.status,{variants:{[t("datatable.unread")]:"warning",[t("datatable.read")]:"success"},defaultVariant:"secondary",headerClassName:"text-start",className:"text-start"}),H("created_at",l.created,{relative:!0,className:"text-center",headerClassName:"text-center px-0"}),I([{label:t("datatable.view"),icon:oe,onClick:m=>{window.location.href=route("super-admin.needs.show",m.id)}},{label:t("datatable.delete"),icon:re,onClick:m=>{f(m)},variant:"destructive"}])])}const de={class:"p-4"},ne={class:"mb-6 flex items-center justify-between"},me={class:"text-3xl font-bold"},ce={key:0,class:"flex items-center gap-2"},ue={class:"space-y-4"},pe={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"},_e={class:"space-y-2"},fe={class:"text-sm font-medium"},be={class:"space-y-2"},he={class:"text-sm font-medium"},ve={class:"space-y-2"},ge={class:"text-sm font-medium"},xe={class:"flex items-center justify-between border-t pt-4"},Ce={class:"text-sm text-muted-foreground"},ye={key:0},Ne={class:"flex gap-2"},et=Z({__name:"Index",props:{needs:{},filters:{},columnLabels:{}},setup(f){const l=f,m=()=>{const s=l.filters;return{...s,status:(s==null?void 0:s.status)||"",created_from:V(s==null?void 0:s.created_from),created_to:V(s==null?void 0:s.created_to)}},{localFilters:o,isFilteringLoading:C,hasActiveFilters:b,activeFilterCount:u,applyFilters:$,clearFilters:S,updateFilters:T}=W(m(),{routeName:"super-admin.needs.index",preserveState:!1,preserveScroll:!0});ee(()=>l.filters,s=>{s&&T(m())},{deep:!0});const z=()=>{o.value.created_from&&(o.value.created_from=N(o.value.created_from)),o.value.created_to&&(o.value.created_to=N(o.value.created_to)),$()},B={searchable:!0,searchPlaceholder:t("datatable.search_placeholder"),selectable:!0,columnVisibility:!0,perPageSelector:!0,perPageOptions:[10,25,50,100],serverSide:!0,pagination:l.needs,filterable:!0,filters:{...l.filters,direction:l.filters.direction},routeName:"super-admin.needs.index"},P=()=>{},{initFlashToasts:L}=K();te(()=>{L()});const U=[{title:t("datatable.needs.title"),href:route("super-admin.needs.index")}],{deleteDialogOpen:h,itemToDelete:p,openDeleteDialog:j}=q(),E=[{value:"unread",label:t("datatable.unread")},{value:"read",label:t("datatable.read")}],M=ie(j,l.columnLabels);return(s,n)=>(_(),k(le,{breadcrumbs:U},{default:c(()=>{var y;return[d(e(ae),{title:e(t)("datatable.needs.title")},null,8,["title"]),a("div",de,[a("div",ne,[a("div",null,[a("h1",me,r(e(t)("datatable.needs.title")),1)])]),d(G,{columns:e(M),data:s.needs.data,config:B,onSelectionChange:P},{toolbar:c(({table:i})=>[e(b)?(_(),D("div",ce,[d(e(J),{value:`${e(u)} ${e(u)===1?"filter":"filters"} active`,severity:"info"},null,8,["value"])])):g("",!0),i.getFilteredSelectedRowModel().rows.length>0?(_(),k(e(F),{key:1,variant:"destructive",size:"sm"},{default:c(()=>[x(r(e(t)("datatable.delete"))+" ("+r(i.getFilteredSelectedRowModel().rows.length)+") ",1)]),_:2},1024)):g("",!0)]),filters:c(()=>[a("div",ue,[a("div",pe,[a("div",_e,[a("label",fe,r(e(t)("datatable.status")),1),d(Y,{modelValue:e(o).status,"onUpdate:modelValue":n[0]||(n[0]=i=>e(o).status=i),options:E,optionLabel:"label",optionValue:"value",placeholder:e(t)("datatable.all_status"),class:"w-full",size:"small",showClear:!0,filter:"",filterPlaceholder:e(t)("datatable.search")+"...",scrollHeight:"200px"},null,8,["modelValue","placeholder","filterPlaceholder"])]),a("div",be,[a("label",he,r(e(t)("datatable.created_from")),1),d(w,{modelValue:e(o).created_from,"onUpdate:modelValue":n[1]||(n[1]=i=>e(o).created_from=i),placeholder:e(t)("datatable.select_created_from"),size:"small","icon-display":"input"},null,8,["modelValue","placeholder"])]),a("div",ve,[a("label",ge,r(e(t)("datatable.created_to")),1),d(w,{modelValue:e(o).created_to,"onUpdate:modelValue":n[2]||(n[2]=i=>e(o).created_to=i),placeholder:e(t)("datatable.select_created_to"),size:"small","icon-display":"input"},null,8,["modelValue","placeholder"])])]),a("div",xe,[a("div",Ce,[e(b)?(_(),D("span",ye,r(e(u))+" "+r(e(u)===1?e(t)("datatable.filter"):e(t)("datatable.filters"))+" "+r(e(t)("datatable.applied")),1)):g("",!0)]),a("div",Ne,[d(e(F),{onClick:e(S),variant:"ghost",size:"sm",disabled:!e(b)||e(C)},{default:c(()=>[x(r(e(t)("datatable.clear_all")),1)]),_:1},8,["onClick","disabled"]),d(X,{onClick:z,size:"sm",variant:"default",loading:e(C)},{default:c(()=>[x(r(e(t)("datatable.filter")),1)]),_:1},8,["loading"])])])])]),_:1},8,["columns","data"]),d(Q,{open:e(h),"onUpdate:open":n[3]||(n[3]=i=>se(h)?h.value=i:null),"item-id":((y=e(p))==null?void 0:y.id)??null,"item-name":e(p)?`${e(p).f_name} ${e(p).l_name}`:null,"route-name":"super-admin.needs.destroy",title:e(t)("datatable.delete_confirmation")},null,8,["open","item-id","item-name","title"])])]}),_:1}))}});export{et as default};
