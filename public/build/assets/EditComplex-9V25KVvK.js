import{d as E,A as D,C as N,E as k,f as A,o as b,w as n,a,b as o,u as e,m as H,h as W,c as v,e as y,t as r,g as u,l as U,O as q,F as O,D as R,W as G}from"./app-BhBziGTL.js";import{_ as w}from"./DashboardButton.vue_vue_type_script_setup_true_lang-DSwy_GzT.js";import{D as $}from"./DashboardFileUpload-ZQZ7TiPy.js";import{_ as z}from"./DashboardSelect.vue_vue_type_style_index_1_lang-rT_SvoN9.js";import{D as x}from"./DashboardTextInput-BYrTwRDe.js";import{D as F}from"./DashboardTextarea-C5kSgsmc.js";import{D as C}from"./DashboardToggle-V7KkVKUV.js";import{_ as h}from"./Hint.vue_vue_type_script_setup_true_lang-nFrjS0RM.js";import{_ as t}from"./translations-Bp9uk9Mv.js";import{_ as J}from"./ActionLayout.vue_vue_type_script_setup_true_lang-lY8jih7p.js";import{_ as f}from"./InputError.vue_vue_type_script_setup_true_lang-Cw0xYEiz.js";import{_ as c}from"./Label.vue_vue_type_script_setup_true_lang-y1HlveGn.js";import{P as K}from"./plus-wS9NWTUX.js";import{T as Q}from"./trash-2-BalvulRX.js";import"./index-DqoYVAWA.js";import"./createLucideIcon-2Wjojt7r.js";import"./index-CM6GdcR6.js";import"./index-DkOJ7IcR.js";import"./index-Cg5xeHtV.js";import"./index-BiFlb9Yf.js";import"./index-DWPXAr61.js";import"./upload-B_DoPoWW.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-CgELsMhX.js";import"./index-BsvMk15c.js";import"./index-D2agXNta.js";import"./Switch.vue_vue_type_script_setup_true_lang-DTo6_bI3.js";import"./Heading.vue_vue_type_script_setup_true_lang-Dbckej_5.js";import"./Card.vue_vue_type_script_setup_true_lang-Du5ZPAwW.js";import"./CardTitle.vue_vue_type_script_setup_true_lang-CcHrwcCG.js";import"./AdminLayout.vue_vue_type_script_setup_true_lang-CA66TNPH.js";import"./useGuard-3UPC_rEo.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-BP2b5BWR.js";const X={class:"rounded-lg border border-dashed border-muted-foreground/30 bg-muted/10 p-4"},Y={class:"flex items-center gap-3"},Z={class:"flex-1"},ee={class:"text-sm font-semibold"},ae={class:"text-xs text-muted-foreground"},te={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},le={class:"space-y-2"},se={class:"space-y-2"},oe={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},de={class:"space-y-2"},re={class:"space-y-2"},ie={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},ne={class:"space-y-2"},ue={class:"space-y-2"},ce={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},pe={class:"space-y-2"},me={class:"space-y-2"},_e={class:"space-y-2"},fe={class:"space-y-2"},ge={class:"space-y-4 rounded-lg border border-dashed border-primary/30 bg-primary/5 p-4"},he={class:"text-sm font-semibold"},be={class:"text-xs text-muted-foreground"},ve={class:"flex gap-4"},Ve={class:"flex items-center gap-2"},ye={class:"flex items-center gap-2"},xe={class:"flex items-center gap-2"},we={key:0,class:"space-y-2"},ze={class:"space-y-4"},ke={class:"flex items-center justify-between"},Ue={class:"text-lg font-semibold"},qe={class:"text-sm text-muted-foreground"},$e={key:0,class:"rounded-lg border border-dashed border-muted-foreground/30 bg-muted/10 p-8 text-center"},Ce={class:"text-sm text-muted-foreground"},Pe={class:"flex items-center justify-between"},De={class:"font-semibold"},Fe={class:"grid grid-cols-1 gap-4 lg:grid-cols-2"},Le={key:0,class:"space-y-2"},Me={key:1,class:"space-y-2"},Te={class:"space-y-2"},Ie={key:0,class:"space-y-2"},Se={class:"space-y-2"},je={class:"flex justify-end gap-2"},va=E({__name:"EditComplex",props:{product:{},categories:{},qualities:{},colors:{},sizes:{},existingVariants:{},existingPlacementFiles:{},existingFiles:{}},setup(L){const p=L,m=D((()=>{const i=p.existingVariants.some(s=>s.color_id),d=p.existingVariants.some(s=>s.size_id);return i&&d?"both":d?"size":"color"})()),V=D(p.existingVariants.map(i=>({id:i.id,color_id:i.color_id,size_id:i.size_id,price:i.price,status:i.status,temp_files:i.existing_media||[],existing_media:i.existing_media||[]}))),l=N({name_en:p.product.name_en,name_ar:p.product.name_ar,slug:p.product.slug,description_en:p.product.description_en||"",description_ar:p.product.description_ar||"",category_id:p.product.category_id,quality_id:p.product.quality_id,sku:p.product.sku,has_variants:!0,status:p.product.status,temp_files:p.existingFiles||[],placement_image:p.existingPlacementFiles||[],variants:[]}),M=()=>{V.value.push({id:`variant-${Date.now()}`,color_id:null,size_id:null,price:null,status:!0,temp_files:[]})},T=i=>{V.value.splice(i,1)},I=k(()=>m.value==="color"||m.value==="both"),S=k(()=>m.value==="size"||m.value==="both"),j=k(()=>m.value==="color"||m.value==="both"),P=()=>{l.variants=V.value.map(i=>({id:typeof i.id=="number"?i.id:null,color_id:i.color_id,size_id:i.size_id,price:i.price,status:i.status,temp_files:i.temp_files.filter(d=>d.temp_path),existing_media:i.existing_media||[],deleted_media_ids:i.deleted_media_ids||[]})),l.put(route("super-admin.products.update-complex",p.product.id),{onError:i=>{console.error("Validation errors:",i)},onSuccess:()=>{console.log("Product updated successfully")}})},B=[{title:t("sidebar.products"),href:route("super-admin.products.index")},{title:p.product.name_en,href:"#"}];return(i,d)=>(b(),A(J,{type:"edit",title:e(t)("datatable.products.title"),description:e(t)("datatable.products.edit_description"),breadcrumbs:B,"back-href":i.route("super-admin.products.index"),"show-card":!1,"max-width":"full"},{footer:n(()=>[o("div",je,[a(w,{onClick:d[15]||(d[15]=s=>e(G).visit(i.route("super-admin.products.index"))),variant:"secondary",disabled:e(l).processing},{default:n(()=>[u(r(e(t)("datatable.cancel")),1)]),_:1},8,["disabled"]),a(w,{onClick:P,loading:e(l).processing,variant:"default"},{default:n(()=>[u(r(e(t)("datatable.update")),1)]),_:1},8,["loading"])])]),default:n(()=>[a(e(H),{title:`${e(t)("datatable.edit")} ${p.product.name_en}`},null,8,["title"]),o("form",{onSubmit:W(P,["prevent"]),class:"space-y-6"},[o("div",X,[o("div",Y,[d[16]||(d[16]=o("div",{class:"flex h-10 w-10 items-center justify-center rounded-full bg-primary/10"},[o("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-5 w-5 text-primary",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[o("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z"})])],-1)),o("div",Z,[o("h3",ee,r(e(t)("datatable.complex_product")),1),o("p",ae,r(e(t)("datatable.complex_product_description")),1)]),a(C,{id:"has_variants",modelValue:e(l).has_variants,"onUpdate:modelValue":d[0]||(d[0]=s=>e(l).has_variants=s),disabled:"",label:e(t)("datatable.variants_enabled"),size:"small"},null,8,["modelValue","label"])])]),o("div",te,[o("div",le,[a(e(c),{for:"name_en",required:""},{default:n(()=>[u(r(e(t)("datatable.name_en")),1)]),_:1}),a(x,{id:"name_en",modelValue:e(l).name_en,"onUpdate:modelValue":d[1]||(d[1]=s=>e(l).name_en=s),type:"text",placeholder:e(t)("datatable.name_en_placeholder"),error:e(l).errors.name_en,autofocus:"",required:""},null,8,["modelValue","placeholder","error"]),a(f,{message:e(l).errors.name_en},null,8,["message"]),a(h,{text:e(t)("datatable.name_en_hint")},null,8,["text"])]),o("div",se,[a(e(c),{for:"name_ar",required:""},{default:n(()=>[u(r(e(t)("datatable.name_ar")),1)]),_:1}),a(x,{id:"name_ar",modelValue:e(l).name_ar,"onUpdate:modelValue":d[2]||(d[2]=s=>e(l).name_ar=s),type:"text",placeholder:e(t)("datatable.name_ar_placeholder"),error:e(l).errors.name_ar,required:""},null,8,["modelValue","placeholder","error"]),a(f,{message:e(l).errors.name_ar},null,8,["message"]),a(h,{text:e(t)("datatable.name_ar_hint")},null,8,["text"])])]),o("div",oe,[o("div",de,[a(e(c),{for:"slug",required:""},{default:n(()=>[u(r(e(t)("datatable.slug")),1)]),_:1}),a(x,{id:"slug",modelValue:e(l).slug,"onUpdate:modelValue":d[3]||(d[3]=s=>e(l).slug=s),type:"text",placeholder:e(t)("datatable.slug_placeholder"),error:e(l).errors.slug,disabled:""},null,8,["modelValue","placeholder","error"]),a(f,{message:e(l).errors.slug},null,8,["message"]),a(h,{text:e(t)("datatable.slug_auto_hint")},null,8,["text"])]),o("div",re,[a(e(c),{for:"sku",required:""},{default:n(()=>[u(r(e(t)("datatable.sku")),1)]),_:1}),a(x,{id:"sku",modelValue:e(l).sku,"onUpdate:modelValue":d[4]||(d[4]=s=>e(l).sku=s),type:"text",placeholder:e(t)("datatable.sku_placeholder"),error:e(l).errors.sku,disabled:""},null,8,["modelValue","placeholder","error"]),a(f,{message:e(l).errors.sku},null,8,["message"]),a(h,{text:e(t)("datatable.sku_auto_hint")},null,8,["text"])])]),o("div",ie,[o("div",ne,[a(e(c),{required:""},{default:n(()=>[u(r(e(t)("datatable.category")),1)]),_:1}),a(z,{id:"category_id",modelValue:e(l).category_id,"onUpdate:modelValue":d[5]||(d[5]=s=>e(l).category_id=s),options:i.categories,autoLocalizedLabel:"",optionValue:"id",placeholder:e(t)("datatable.select_category"),class:"w-full",showClear:!0,filter:"",error:e(l).errors.category_id??null,filterPlaceholder:e(t)("datatable.search")},null,8,["modelValue","options","placeholder","error","filterPlaceholder"]),a(f,{message:e(l).errors.category_id},null,8,["message"]),a(h,{text:e(t)("datatable.category_hint")},null,8,["text"])]),o("div",ue,[a(e(c),{required:""},{default:n(()=>[u(r(e(t)("datatable.quality")),1)]),_:1}),a(z,{id:"quality_id",modelValue:e(l).quality_id,"onUpdate:modelValue":d[6]||(d[6]=s=>e(l).quality_id=s),options:i.qualities,autoLocalizedLabel:"",optionValue:"id",placeholder:e(t)("datatable.select_quality"),class:"w-full",showClear:!0,filter:"",error:e(l).errors.quality_id??null,filterPlaceholder:e(t)("datatable.search"),maxSelectedLabels:1,showToggleAll:!1},null,8,["modelValue","options","placeholder","error","filterPlaceholder"]),a(f,{message:e(l).errors.quality_id},null,8,["message"]),a(h,{text:e(t)("datatable.quality_hint")},null,8,["text"])])]),o("div",ce,[o("div",pe,[a(e(c),{for:"description_en"},{default:n(()=>[u(r(e(t)("datatable.description_en")),1)]),_:1}),a(F,{id:"description_en",modelValue:e(l).description_en,"onUpdate:modelValue":d[7]||(d[7]=s=>e(l).description_en=s),placeholder:e(t)("datatable.description_en_placeholder"),error:e(l).errors.description_en,rows:4},null,8,["modelValue","placeholder","error"]),a(f,{message:e(l).errors.description_en},null,8,["message"])]),o("div",me,[a(e(c),{for:"description_ar"},{default:n(()=>[u(r(e(t)("datatable.description_ar")),1)]),_:1}),a(F,{id:"description_ar",modelValue:e(l).description_ar,"onUpdate:modelValue":d[8]||(d[8]=s=>e(l).description_ar=s),placeholder:e(t)("datatable.description_ar_placeholder"),error:e(l).errors.description_ar,rows:4},null,8,["modelValue","placeholder","error"]),a(f,{message:e(l).errors.description_ar},null,8,["message"])])]),o("div",_e,[a(e(c),{for:"status"},{default:n(()=>[u(r(e(t)("datatable.status")),1)]),_:1}),a(C,{id:"status",modelValue:e(l).status,"onUpdate:modelValue":d[9]||(d[9]=s=>e(l).status=s),error:e(l).errors.status,label:e(l).status?e(t)("datatable.active"):e(t)("datatable.inactive"),hint:e(t)("datatable.status_hint")},null,8,["modelValue","error","label","hint"]),a(f,{message:e(l).errors.status},null,8,["message"])]),o("div",fe,[a(e(c),{for:"placement_image"},{default:n(()=>[u(r(e(t)("datatable.placement_image")),1)]),_:1}),a($,{id:"placement_image",modelValue:e(l).placement_image,"onUpdate:modelValue":d[10]||(d[10]=s=>e(l).placement_image=s),multiple:!1,"file-limit":1,accept:"image/*",context:"product-placement"},null,8,["modelValue"]),a(h,{text:e(t)("datatable.placement_image_hint")},null,8,["text"]),a(f,{message:e(l).errors.placement_image},null,8,["message"])]),o("div",ge,[o("div",null,[o("h3",he,r(e(t)("datatable.variant_type")),1),o("p",be,r(e(t)("datatable.variant_type_hint")),1)]),o("div",ve,[o("div",Ve,[U(o("input",{type:"radio",id:"variant_color",value:"color","onUpdate:modelValue":d[11]||(d[11]=s=>m.value=s),class:"h-4 w-4"},null,512),[[q,m.value]]),a(e(c),{for:"variant_color",class:"cursor-pointer font-normal"},{default:n(()=>[u(r(e(t)("datatable.color_only")),1)]),_:1})]),o("div",ye,[U(o("input",{type:"radio",id:"variant_size",value:"size","onUpdate:modelValue":d[12]||(d[12]=s=>m.value=s),class:"h-4 w-4"},null,512),[[q,m.value]]),a(e(c),{for:"variant_size",class:"cursor-pointer font-normal"},{default:n(()=>[u(r(e(t)("datatable.size_only")),1)]),_:1})]),o("div",xe,[U(o("input",{type:"radio",id:"variant_both",value:"both","onUpdate:modelValue":d[13]||(d[13]=s=>m.value=s),class:"h-4 w-4"},null,512),[[q,m.value]]),a(e(c),{for:"variant_both",class:"cursor-pointer font-normal"},{default:n(()=>[u(r(e(t)("datatable.color_and_size")),1)]),_:1})])])]),m.value==="size"?(b(),v("div",we,[a(e(c),{for:"temp_files"},{default:n(()=>[u(r(e(t)("datatable.featured_image")),1)]),_:1}),a($,{"file-limit":1,id:"temp_files",modelValue:e(l).temp_files,"onUpdate:modelValue":d[14]||(d[14]=s=>e(l).temp_files=s),multiple:!1,accept:"image/*",context:"products"},null,8,["modelValue"]),a(h,{text:e(t)("datatable.featured_image_hint")},null,8,["text"]),a(f,{message:e(l).errors.temp_files},null,8,["message"])])):y("",!0),o("div",ze,[o("div",ke,[o("div",null,[o("h3",Ue,r(e(t)("datatable.product_variants")),1),o("p",qe,r(e(t)("datatable.product_variants_hint")),1)]),a(w,{type:"button",onClick:M,variant:"outline",size:"sm"},{default:n(()=>[a(e(K),{class:"mr-2 h-4 w-4"}),u(" "+r(e(t)("datatable.add_variant")),1)]),_:1})]),a(f,{message:e(l).errors.variants},null,8,["message"]),V.value.length===0?(b(),v("div",$e,[o("p",Ce,r(e(t)("datatable.no_variants_added")),1)])):y("",!0),(b(!0),v(O,null,R(V.value,(s,g)=>(b(),v("div",{key:s.id,class:"space-y-4 rounded-lg border p-4"},[o("div",Pe,[o("h4",De,r(e(t)("datatable.variant"))+" #"+r(g+1),1),a(w,{type:"button",onClick:_=>T(g),variant:"ghost",size:"sm"},{default:n(()=>[a(e(Q),{class:"h-4 w-4 text-destructive"})]),_:2},1032,["onClick"])]),o("div",Fe,[I.value?(b(),v("div",Le,[a(e(c),{required:""},{default:n(()=>[u(r(e(t)("datatable.color")),1)]),_:1}),a(z,{id:`color_${g}`,modelValue:s.color_id,"onUpdate:modelValue":_=>s.color_id=_,options:i.colors,autoLocalizedLabel:"",optionValue:"id",placeholder:e(t)("datatable.select_color"),class:"w-full",showClear:!0,filter:"",filterPlaceholder:e(t)("datatable.search")},null,8,["id","modelValue","onUpdate:modelValue","options","placeholder","filterPlaceholder"])])):y("",!0),S.value?(b(),v("div",Me,[a(e(c),{required:""},{default:n(()=>[u(r(e(t)("datatable.size")),1)]),_:1}),a(z,{id:`size_${g}`,modelValue:s.size_id,"onUpdate:modelValue":_=>s.size_id=_,options:i.sizes,autoLocalizedLabel:"",optionValue:"id",placeholder:e(t)("datatable.select_size"),class:"w-full",showClear:!0,filter:"",filterPlaceholder:e(t)("datatable.search")},null,8,["id","modelValue","onUpdate:modelValue","options","placeholder","filterPlaceholder"])])):y("",!0),o("div",Te,[a(e(c),{for:`price_${g}`,required:""},{default:n(()=>[u(r(e(t)("datatable.price")),1)]),_:2},1032,["for"]),a(x,{id:`price_${g}`,modelValue:s.price,"onUpdate:modelValue":_=>s.price=_,type:"number",step:"0.01",placeholder:e(t)("datatable.price_placeholder")},null,8,["id","modelValue","onUpdate:modelValue","placeholder"])])]),j.value?(b(),v("div",Ie,[a(e(c),{for:`image_${g}`},{default:n(()=>[u(r(e(t)("datatable.variant_image")),1)]),_:2},1032,["for"]),a($,{id:`image_${g}`,modelValue:s.temp_files,"onUpdate:modelValue":_=>s.temp_files=_,deletedMediaIds:s.deleted_media_ids,"onUpdate:deletedMediaIds":_=>s.deleted_media_ids=_,multiple:!1,"file-limit":1,accept:"image/*",context:"product-variants"},null,8,["id","modelValue","onUpdate:modelValue","deletedMediaIds","onUpdate:deletedMediaIds"]),a(h,{text:e(t)("datatable.variant_image_hint")},null,8,["text"])])):y("",!0),o("div",Se,[a(e(c),{for:`variant_status_${g}`},{default:n(()=>[u(r(e(t)("datatable.status")),1)]),_:2},1032,["for"]),a(C,{id:`variant_status_${g}`,modelValue:s.status,"onUpdate:modelValue":_=>s.status=_,label:s.status?e(t)("datatable.active"):e(t)("datatable.inactive"),size:"small"},null,8,["id","modelValue","onUpdate:modelValue","label"])])]))),128))])],32)]),_:1},8,["title","description","back-href"]))}});export{va as default};
