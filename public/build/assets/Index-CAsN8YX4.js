import{c as A,a as I,t as N,d as k,b as G,u as H,e as J,D as K,_ as Q,f as _}from"./index-BW-UAAHL.js";import{u as T,_ as X}from"./useToast-CtOIdxR-.js";import{_ as S}from"./DashboardButton.vue_vue_type_script_setup_true_lang-jdvaR_3Y.js";import{_ as p}from"./DashboardDatePicker.vue_vue_type_style_index_0_lang-3c7o6w-E.js";import{p as f}from"./parsers-DcDh6GPu.js";import{_ as e}from"./index-D-urzs1U.js";import{d as Y,j as Z,k as tt,l as et,f as $,o as b,w as u,a as r,b as o,u as t,m as at,t as i,W as st,g as h,c as z,e as C,p as ot}from"./app-C_9PBI8O.js";import{_ as lt}from"./AdminLayout.vue_vue_type_script_setup_true_lang-zQel-0qJ.js";import{_ as F}from"./index-DmYhWnlU.js";import{E as it}from"./eye-BCOMMbRf.js";import{S as dt}from"./square-pen-B6P9Gt_h.js";import{T as nt}from"./trash-2-BLGLvqc7.js";import"./Card.vue_vue_type_script_setup_true_lang-CdHN0ZfT.js";import"./createLucideIcon-C0ithsll.js";import"./TableHeader.vue_vue_type_script_setup_true_lang-vhl8EJLP.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-BxeelRGj.js";import"./Switch.vue_vue_type_script_setup_true_lang-DlH5kZNA.js";import"./index-CKRth63G.js";import"./DialogTitle.vue_vue_type_script_setup_true_lang-B3JVcvq7.js";import"./refresh-cw-Dd2PsCct.js";import"./index-XY12mXXh.js";import"./index-BMs6oOoE.js";import"./index-BGfNR6OY.js";import"./index-wI7wi_Ra.js";import"./index-COJUaldu.js";import"./useGuard-BknsbsIw.js";import"./AppLogoIcon.vue_vue_type_script_setup_true_lang-DnC3vUMI.js";function rt(v,n){return T(),A([I(n.number,{headerClassName:"text-start",startFrom:1}),N("name",n.product_name,{sortable:!0,searchable:!0,visible:!0,className:"font-medium text-start font-bold",headerClassName:"text-start"}),N("discount_price",n.discount_price,{sortable:!0,searchable:!1,visible:!0,className:"text-start font-mono font-semibold",headerClassName:"text-start",format:c=>`$${Number(c).toFixed(2)}`}),k("discount_start_date",n.discount_start_date,{sortable:!0,className:"text-center",headerClassName:"text-center"}),k("discount_end_date",n.discount_end_date,{sortable:!0,className:"text-center",headerClassName:"text-center"}),G([{label:e("datatable.view"),icon:it,onClick:c=>{window.location.href=route("super-admin.discounts.show",c.id)}},{label:e("datatable.edit"),icon:dt,onClick:c=>{window.location.href=route("super-admin.discounts.edit",c.id)}},{label:e("datatable.delete"),icon:nt,onClick:c=>{v(c)},variant:"destructive"}])])}const ct={class:"p-4"},ut={class:"mb-6 flex items-center justify-between"},mt={class:"text-3xl font-bold"},_t={key:0,class:"flex items-center gap-2"},pt={class:"space-y-4"},ft={class:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3"},bt={class:"space-y-2"},ht={class:"text-sm font-medium"},vt={class:"space-y-2"},gt={class:"text-sm font-medium"},xt={class:"space-y-2"},Ct={class:"text-sm font-medium"},yt={class:"space-y-2"},Vt={class:"text-sm font-medium"},wt={class:"space-y-2"},Dt={class:"text-sm font-medium"},Nt={class:"flex items-center justify-between border-t pt-4"},kt={class:"text-sm text-muted-foreground"},St={key:0},$t={class:"flex gap-2"},oe=Y({__name:"Index",props:{discounts:{},filters:{},columnLabels:{}},setup(v){const n=v,c=()=>{const s=n.filters;return{...s,has_limited_time_discount:(s==null?void 0:s.has_limited_time_discount)||"",discount_start_from:f(s==null?void 0:s.discount_start_from),discount_start_to:f(s==null?void 0:s.discount_start_to),discount_end_from:f(s==null?void 0:s.discount_end_from),discount_end_to:f(s==null?void 0:s.discount_end_to)}},{localFilters:a,isFilteringLoading:y,hasActiveFilters:g,activeFilterCount:m,applyFilters:U,clearFilters:B,updateFilters:L}=H(c(),{routeName:"super-admin.discounts.index",preserveState:!1,preserveScroll:!0});Z(()=>n.filters,s=>{s&&L(c())},{deep:!0});const P=()=>{a.value.discount_start_from&&(a.value.discount_start_from=_(a.value.discount_start_from)),a.value.discount_start_to&&(a.value.discount_start_to=_(a.value.discount_start_to)),a.value.discount_end_from&&(a.value.discount_end_from=_(a.value.discount_end_from)),a.value.discount_end_to&&(a.value.discount_end_to=_(a.value.discount_end_to)),U()},j={searchable:!0,searchPlaceholder:e("datatable.search_placeholder"),selectable:!0,columnVisibility:!0,perPageSelector:!0,perPageOptions:[10,25,50,100],serverSide:!0,pagination:n.discounts,filterable:!0,filters:{...n.filters,direction:n.filters.direction},routeName:"super-admin.discounts.index"},E=()=>{},{initFlashToasts:M}=T();tt(()=>{M()});const R=[{title:e("datatable.discounts.title"),href:route("super-admin.discounts.index")}],{deleteDialogOpen:x,itemToDelete:V,openDeleteDialog:W}=J(),O=rt(W,n.columnLabels);return(s,d)=>{const q=et("DashboardSelect");return b(),$(lt,{breadcrumbs:R},{default:u(()=>{var w,D;return[r(t(at),{title:t(e)("datatable.discounts.title")},null,8,["title"]),o("div",ct,[o("div",ut,[o("div",null,[o("h1",mt,i(t(e)("datatable.discounts.title")),1)]),r(S,{onClick:d[0]||(d[0]=l=>t(st).visit(s.route("super-admin.discounts.create"))),variant:"default"},{default:u(()=>[h(i(t(e)("datatable.create"))+" "+i(t(e)("datatable.discount")),1)]),_:1})]),r(K,{columns:t(O),data:s.discounts.data,config:j,onSelectionChange:E},{toolbar:u(({table:l})=>[t(g)?(b(),z("div",_t,[r(t(Q),{value:`${t(m)} ${t(m)===1?"filter":"filters"} active`,severity:"info"},null,8,["value"])])):C("",!0),l.getFilteredSelectedRowModel().rows.length>0?(b(),$(t(F),{key:1,variant:"destructive",size:"sm"},{default:u(()=>[h(i(t(e)("datatable.delete"))+" ("+i(l.getFilteredSelectedRowModel().rows.length)+") ",1)]),_:2},1024)):C("",!0)]),filters:u(()=>[o("div",pt,[o("div",ft,[o("div",bt,[o("label",ht,i(t(e)("datatable.has_limited_time_discount")),1),r(q,{modelValue:t(a).has_limited_time_discount,"onUpdate:modelValue":d[1]||(d[1]=l=>t(a).has_limited_time_discount=l),options:[{value:"1",label:t(e)("datatable.yes")},{value:"0",label:t(e)("datatable.no")}],optionLabel:"label",optionValue:"value",placeholder:t(e)("datatable.all"),class:"w-full",size:"small",showClear:!0},null,8,["modelValue","options","placeholder"])]),o("div",vt,[o("label",gt,i(t(e)("datatable.discount_start_from")),1),r(p,{modelValue:t(a).discount_start_from,"onUpdate:modelValue":d[2]||(d[2]=l=>t(a).discount_start_from=l),placeholder:t(e)("datatable.select_date"),size:"small","icon-display":"input"},null,8,["modelValue","placeholder"])]),o("div",xt,[o("label",Ct,i(t(e)("datatable.discount_start_to")),1),r(p,{modelValue:t(a).discount_start_to,"onUpdate:modelValue":d[3]||(d[3]=l=>t(a).discount_start_to=l),placeholder:t(e)("datatable.select_date"),size:"small","icon-display":"input"},null,8,["modelValue","placeholder"])]),o("div",yt,[o("label",Vt,i(t(e)("datatable.discount_end_from")),1),r(p,{modelValue:t(a).discount_end_from,"onUpdate:modelValue":d[4]||(d[4]=l=>t(a).discount_end_from=l),placeholder:t(e)("datatable.select_date"),size:"small","icon-display":"input"},null,8,["modelValue","placeholder"])]),o("div",wt,[o("label",Dt,i(t(e)("datatable.discount_end_to")),1),r(p,{modelValue:t(a).discount_end_to,"onUpdate:modelValue":d[5]||(d[5]=l=>t(a).discount_end_to=l),placeholder:t(e)("datatable.select_date"),size:"small","icon-display":"input"},null,8,["modelValue","placeholder"])])]),o("div",Nt,[o("div",kt,[t(g)?(b(),z("span",St,i(t(m))+" "+i(t(m)===1?t(e)("datatable.filter"):t(e)("datatable.filters"))+" "+i(t(e)("datatable.applied")),1)):C("",!0)]),o("div",$t,[r(t(F),{onClick:t(B),variant:"ghost",size:"sm",disabled:!t(g)||t(y)},{default:u(()=>[h(i(t(e)("datatable.clear_all")),1)]),_:1},8,["onClick","disabled"]),r(S,{onClick:P,size:"sm",variant:"default",loading:t(y)},{default:u(()=>[h(i(t(e)("datatable.filter")),1)]),_:1},8,["loading"])])])])]),_:1},8,["columns","data"]),r(X,{open:t(x),"onUpdate:open":d[6]||(d[6]=l=>ot(x)?x.value=l:null),"item-id":((w=t(V))==null?void 0:w.id)??null,"item-name":(D=t(V))==null?void 0:D.name,"route-name":"super-admin.discounts.destroy",title:t(e)("datatable.delete_confirmation")},null,8,["open","item-id","item-name","title"])])]}),_:1})}}});export{oe as default};
